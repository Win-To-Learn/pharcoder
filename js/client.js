!function t(e,o,s){function i(a,n){if(!o[a]){if(!e[a]){var p="function"==typeof require&&require;if(!n&&p)return p(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){var o=e[a][1][t];return i(o?o:t)},h,h.exports,t,e,o,s)}return o[a].exports}for(var r="function"==typeof require&&require,a=0;a<s.length;a++)i(s[a]);return i}({1:[function(t,e,o){"use strict";var s=t("./Starcoder.js"),i=t("./client-components/WorldApi.js"),r=t("./client-components/CodeEndpointClient.js"),a=t("./client-components/Starfield.js"),n=t("./client-components/LeaderBoardClient.js"),p=t("./client-components/FlexTextWrapper.js"),c=t("./client-components/CodeUI.js"),h={boot:t("./phaserstates/Boot.js"),space:t("./phaserstates/Space.js"),login:t("./phaserstates/Login.js"),loader:t("./phaserstates/Loader.js")};s.prototype.init=function(){this.io=io,this.game=new Phaser.Game("100%","100%",Phaser.AUTO,"main"),this.game.forceSingleUpdate=!0,this.game.starcoder=this;for(var t in h){var e=new h[t];e.starcoder=this,this.game.state.add(t,e)}this.onConnectCB=[],this.playerMap={},this.cmdQueue=[],this.connected=!1,this.lastNetError=null,this.implementFeature(i),this.implementFeature(r),this.implementFeature(a),this.implementFeature(n),this.implementFeature(c),this.implementFeature(p)},s.prototype.serverConnect=function(){var t=this;this.socket&&(delete this.socket,this.connected=!1,this.lastNetError=null),$.ajax({url:"/api/identity",method:"GET",success:function(e,o){var s=e.serverUri;t.player=e.player,t.player.id=t.player._id,t.socket=t.io(s,t.config.ioClientOptions),t.socket.on("connect",function(){t.connected=!0,t.lastNetError=null;for(var e=0,o=t.onConnectCB.length;o>e;e++)t.onConnectCB[e].call(t,t.socket);t.socket.emit("login",t.player)})}})},s.prototype.start=function(){this.game.state.start("boot")},s.prototype.attachPlugin=function(){var t=this.game.plugins.add.apply(this.game.plugins,arguments);return t.starcoder=this,t.log=this.log,t},s.prototype.banner=function(){console.log("Starcoder client v"+this.config.version,"built on",this.config.buildTime)},s.prototype.role="Client",e.exports=s},{"./Starcoder.js":2,"./client-components/CodeEndpointClient.js":3,"./client-components/CodeUI.js":4,"./client-components/FlexTextWrapper.js":5,"./client-components/LeaderBoardClient.js":6,"./client-components/Starfield.js":7,"./client-components/WorldApi.js":8,"./phaserstates/Boot.js":29,"./phaserstates/Loader.js":30,"./phaserstates/Login.js":31,"./phaserstates/Space.js":32}],2:[function(t,e,o){"use strict";var s=function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);this.config={};for(var o=0,s=t.length;s>o;o++)this.extendConfig(t[o]);this.banner(),this.init.apply(this,e)};s.prototype.extendConfig=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.config[e]=t[e])},Object.defineProperty(s.prototype,"worldWidth",{get:function(){return this.config.worldBounds[2]-this.config.worldBounds[0]}}),Object.defineProperty(s.prototype,"phaserWidth",{get:function(){return this.config.physicsScale*(this.config.worldBounds[2]-this.config.worldBounds[0])}}),Object.defineProperty(s.prototype,"worldHeight",{get:function(){return this.config.worldBounds[3]-this.config.worldBounds[1]}}),Object.defineProperty(s.prototype,"phaserHeight",{get:function(){return this.config.physicsScale*(this.config.worldBounds[3]-this.config.worldBounds[1])}}),Object.defineProperty(s.prototype,"phaserLeft",{get:function(){return this.config.physicsScale*this.config.worldBounds[0]}}),Object.defineProperty(s.prototype,"phaserTop",{get:function(){return this.config.physicsScale*this.config.worldBounds[1]}}),Object.defineProperty(s.prototype,"phaserRight",{get:function(){return this.config.physicsScale*this.config.worldBounds[2]}}),Object.defineProperty(s.prototype,"phaserBottom",{get:function(){return this.config.physicsScale*this.config.worldBounds[3]}}),s.mixinPrototype=function(t,e){for(var o=Object.keys(e),s=0;s<o.length;s++){var i=o[s],r=e[i];!r||"function"!=typeof r.get&&"function"!=typeof r.set?t[i]=r:Object.defineProperty(t,i,r)}},s.prototype.implementFeature=function(t){for(var e in t)switch(e){case"onConnectCB":case"onReadyCB":case"onLoginCB":case"onDisconnectCB":this[e].push(t[e]);break;case"init":break;default:s.prototype[e]=t[e]}t.init&&t.init.call(this)},s.prototype.log=function(){console.log.apply(console,Array.prototype.slice.call(arguments))},e.exports=s},{}],3:[function(t,e,o){"use strict";e.exports={onConnectCB:function(t){var e=this;t.on("code status",function(t){console.log("STATUS",t)}),t.on("code syntax error",function(t){console.log("SYNTAX",t)}),t.on("code runtime error",function(t){console.log("RUNTIME",t)}),t.on("code saved",function(t){e.addCodeLabel(t)}),t.on("code loaded",function(t){e.setCodeForUI(t)}),t.on("code labels",function(t){for(var o=0,s=t.length;s>o;o++)e.addCodeLabel(t[o])})},sendCodeMessage:function(t,e){console.log("sending",t,e),this.socket.emit("code "+t,e)}}},{}],4:[function(t,e,o){"use strict";e.exports={init:function(){var t=this;this.codeWindowMode="blockly",this.codeLabelCache={},this.blocklyWorkspace=Blockly.inject("blockly",{toolbox:document.getElementById("toolbox")}),this.aceEditor=ace.edit("aceeditor");var e=ace.require("ace/mode/javascript").Mode;this.aceEditor.getSession().setMode(new e),this.aceEditor.setTheme("ace/theme/twilight"),$("button").button(),$("#select-code").selectmenu({position:{within:"#code-window"}}),$("#tabs").tabs({activate:function(e,o){o.oldPanel.is("#blockly")?($(".blocklyToolboxDiv").hide(),t.aceEditor.resize(),t.codeWindowMode="ace"):(Blockly.svgResize(t.blocklyWorkspace),$(".blocklyToolboxDiv").show(),t.codeWindowMode="blockly")}}),this.blocklyWorkspace.addChangeListener(function(){t.aceEditor.setValue(Blockly.JavaScript.workspaceToCode(t.blocklyWorkspace))}),$("#send-code").on("click",function(){"blockly"===t.codeWindowMode?t.sendCodeMessage("exec",Blockly.JavaScript.workspaceToCode(t.blocklyWorkspace)):t.sendCodeMessage("exec",t.aceEditor.getValue())}),$("#save-code").on("click",function(){var e=$("#code-name").val();if(e.length){if("blockly"===t.codeWindowMode){var o=Blockly.Xml.workspaceToDom(t.blocklyWorkspace),s=Blockly.Xml.domToText(o);t.sendCodeMessage("save",{label:e,blockly:s})}else t.sendCodeMessage("save",{label:e,js:t.aceEditor.getValue()});$("#code-name").val("")}}),$("#load-code").on("click",function(){var e=$("#select-code option:selected");e.index()>0&&t.sendCodeMessage("load",e.text())}),this.toggleCodeWindow(!1)},toggleCodeWindow:function(t){this.codeWindowState="boolean"!=typeof t?!this.codeWindowState:t,this.codeWindowState?($("#code-window").show(),$(".blocklyToolboxDiv").show(),"blockly"===this.codeWindowMode?Blockly.svgResize(this.blocklyWorkspace):"ace"===this.codeWindowMode&&this.aceEditor.resize(),this.game.input.keyboard.enabled=!1):($("#code-window").hide(),$(".blocklyToolboxDiv").hide(),this.game.input&&(this.game.input.keyboard.enabled=!0))},addCodeLabel:function(t){this.codeLabelCache[t]||t.length<1||$("#select-code").append("<option>"+t+"</option>").selectmenu("refresh")},setCodeForUI:function(t){if($("#code-name").val(t.label),t.blockly){this.blocklyWorkspace.clear();var e=Blockly.Xml.textToDom(t.blockly);Blockly.Xml.domToWorkspace(this.blocklyWorkspace,e),this.aceEditor.setValue(Blockly.JavaScript.workspaceToCode(this.blocklyWorkspace)),$("#tabs").tabs("option","active",0)}else this.blocklyWorkspace.clear(),this.aceEditor.setValue(t.js),$("#tabs").tabs("option","active",1)}}},{}],5:[function(t,e,o){e.exports={makeFlexText:function(t,e,o,s){if(s.bitmap)var i=this.game.make.bitmapText(t,e,s.bitmap,s.size,s.align);else i=this.game.make.text(t,e,o,s);return i},addFlexText:function(t,e,o,s,i){var r=this.makeFlexText(t,e,o,s);return i=i||this.world,i.add(r),r}}},{}],6:[function(t,e,o){"use strict";e.exports={init:function(){this.leaderBoard={},this.leaderBoardCats=[],this.leaderBoardState=null},onConnectCB:function(t){var e=this;t.on("leaderboard",function(t){for(var o in t)o in e.leaderBoard||e.leaderBoardCats.push(o),null===e.leaderBoardState&&(e.leaderBoardState=0,e.game.leaderboard.visible=!0,setInterval(e.cycleLeaderBoard.bind(e),e.config.leaderBoardClientCycle||5e3)),e.leaderBoardCats[e.leaderBoardState]===o&&e.game.leaderboard.setContent(o,t[o],e.player.id),e.leaderBoard[o]=t[o]})},cycleLeaderBoard:function(){this.leaderBoardState=(this.leaderBoardState+1)%this.leaderBoardCats.length;var t=this.leaderBoardCats[this.leaderBoardState];this.game.leaderboard.setContent(t,this.leaderBoard[t],this.player.id)}}},{}],7:[function(t,e,o){"use strict";e.exports={randomNormal:function(){for(var t=0,e=0;6>e;e++)t+=this.game.rnd.normal();return t/6},drawStar:function(t,e,o,s,i){t.strokeStyle=i,t.beginPath(),t.moveTo(e-s+1,o-s+1),t.lineTo(e+s-1,o+s-1),t.moveTo(e-s+1,o+s-1),t.lineTo(e+s-1,o-s+1),t.moveTo(e,o-s),t.lineTo(e,o+s),t.moveTo(e-s,o),t.lineTo(e+s,o),t.stroke()},drawStarField:function(t,e,o){var s,i,r,a,n,p=Math.round(e/2+this.randomNormal()*e/4),c=Math.round(e/2+this.randomNormal()*e/4),h=[[0,0,p-1,c-1],[p,0,e-1,c-1],[0,c,p-1,e-1],[p,c,e-1,e-1]];for(o=Math.round(o/4),i=0,a=h.length;a>i;i++)for(n=h[i],r=0;o>r;r++)s="hsl(60,100%,"+this.game.rnd.between(90,99)+"%)",this.drawStar(t,this.game.rnd.between(n[0]+7,n[2]-7),this.game.rnd.between(n[1]+7,n[3]-7),this.game.rnd.between(2,4),s)}}},{}],8:[function(t,e,o){"use strict";e.exports={addBody:function(t,e){var o=s[t],i=!1;if(!o)return this.log("Unknown body type:",t),void this.log(e);"Ship"===t&&e.properties.playerid===this.player.id&&(e.mass=this.config.shipMass,i=!0);var r=new o(this.game,e);return"Ship"===t&&(this.playerMap[e.properties.playerid]=r),this.game.playfield.add(r),i&&(this.game.camera.follow(r),this.game.playerShip=r),r},removeBody:function(t){t.destroy(),t.minisprite&&t.minisprite.destroy()}};var s={Ship:t("../phaserbodies/Ship.js"),Asteroid:t("../phaserbodies/Asteroid.js"),Crystal:t("../phaserbodies/Crystal.js"),Bullet:t("../phaserbodies/Bullet.js"),GenericOrb:t("../phaserbodies/GenericOrb.js"),Planetoid:t("../phaserbodies/Planetoid.js"),Tree:t("../phaserbodies/Tree.js"),TractorBeam:t("../phaserbodies/TractorBeam.js"),StarTarget:t("../phaserbodies/StarTarget.js")}},{"../phaserbodies/Asteroid.js":13,"../phaserbodies/Bullet.js":14,"../phaserbodies/Crystal.js":15,"../phaserbodies/GenericOrb.js":16,"../phaserbodies/Planetoid.js":17,"../phaserbodies/Ship.js":18,"../phaserbodies/StarTarget.js":20,"../phaserbodies/TractorBeam.js":24,"../phaserbodies/Tree.js":25}],9:[function(t,e,o){e.exports={ioClientOptions:{reconnection:!1},fonts:{hudCode:{font:"26px Arial",fill:"#00ffff",align:"center"},leaderBoard:{font:"18px Arial",fill:"#0000ff"},leaderBoardTitle:{font:"bold 20px Arial",align:"center",fill:"#ff0000"}},gamerTags:{1:["super","awesome","rainbow","double","triple","vampire","princess","ice","fire","robot","werewolf","sparkle","infinite","cool","yolo","swaggy","zombie","samurai","dancing","power","gold","silver","radioactive","quantum","brilliant","mighty","random"],2:["tiger","ninja","princess","robot","pony","dancer","rocker","master","hacker","rainbow","kitten","puppy","boss","wizard","hero","dragon","tribute","genius","blaster","spider"]}}},{}],10:[function(t,e,o){"use strict";var s=Math.PI,i=2*s,r=Math.sin,a=Math.cos;o.normalize=function(t,e,o,s,i){t=t.slice();var r=[];i&&t.push(t[0]);for(var a=0,n=t.length;n>a;a++){var p={x:t[a][0]*e+o,y:t[a][1]*e+s};r.push(p)}return r},o.octagon=[[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]],o.d2cross=[[-1,-2],[-1,2],[2,-1],[-2,-1],[1,2],[1,-2],[-2,1],[2,1]],o.square0=[[-1,-2],[2,-1],[1,2],[-2,1]],o.square1=[[1,-2],[2,1],[-1,2],[-2,-1]],o.star=[[r(0),a(0)],[r(2*i/5),a(2*i/5)],[r(4*i/5),a(4*i/5)],[r(i/5),a(i/5)],[r(3*i/5),a(3*i/5)]],o.OCTRADIUS=Math.sqrt(5)},{}],11:[function(t,e,o){"use strict";var s=function(){};s.prototype.updateProperties=["lineWidth","lineColor","fillColor","fillAlpha","vectorScale","shape","shapeClosed","playerid","crystals","dead","tag","charge","trees"];var i=function(){};i.prototype.updateProperties=["vectorScale"];var r=function(){};r.prototype.updateProperties=["vectorScale"];var a=function(){};a.prototype.updateProperties=["lineColor","vectorScale"];var n=function(){};n.prototype.updateProperties=["lineColor","fillColor","lineWidth","fillAlpha","vectorScale","owner"];var p=function(){};p.prototype.updateProperties=["vectorScale","lineColor","graph","step","depth"];var c=function(){};c.prototype.updateProperties=["lineColor"];var h=function(){};h.prototype.updateProperties=[];var l=function(){};l.prototype.updateProperties=["stars","lineColor","vectorScale"],o.Ship=s,o.Asteroid=i,o.Crystal=r,o.GenericOrb=a,o.Bullet=c,o.Planetoid=n,o.Tree=p,o.TractorBeam=h,o.StarTarget=l},{}],12:[function(t,e,o){e.exports={version:"0.1",worldBounds:[-200,-200,200,200],physicsScale:20,renderLatency:100,frameRate:1/60,timeSyncFreq:10,shipMass:100}},{}],13:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Asteroid,n=t("../common/Paths.js"),p=function(t,e){i.call(this,t,e)};p.add=function(t,e){var o=new p(t,e);return t.add.existing(o),o},p.prototype=Object.create(i.prototype),p.prototype.constructor=p,s.mixinPrototype(p.prototype,r.prototype),s.mixinPrototype(p.prototype,a.prototype),p.prototype._lineColor="#ff00ff",p.prototype._fillColor="#ff0000",p.prototype._shapeClosed=!0,p.prototype._lineWidth=1,p.prototype._fillAlpha=.25,p.prototype._shape=n.octagon,e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":10,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],14:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Bullet,n=function(t,e){i.call(this,t,e)};n.prototype=Object.create(i.prototype),n.prototype.constructor=n,s.mixinPrototype(n.prototype,r.prototype),s.mixinPrototype(n.prototype,a.prototype),n.prototype.visibleOnMap=!1,n.prototype.sharedTextureKey="laser",n.prototype.drawProcedure=function(t,e){var o=this.game.physics.p2.mpxi(this.vectorScale)*t;this.graphics.lineStyle(4,Phaser.Color.hexToRGB(this.lineColor),1),this.graphics.moveTo(0,0),this.graphics.lineTo(0,1*o),this.graphics.lineStyle(2,16777215,.25),this.graphics.moveTo(0,0),this.graphics.lineTo(0,1*o)},e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],15:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Crystal,n=t("../common/Paths.js"),p=function(t,e){i.call(this,t,e)};p.add=function(t,e){var o=new p(t,e);return t.add.existing(o),o},p.prototype=Object.create(i.prototype),p.prototype.constructor=p,s.mixinPrototype(p.prototype,r.prototype),s.mixinPrototype(p.prototype,a.prototype),p.prototype._lineColor="#00ffff",p.prototype._fillColor="#000000",p.prototype._shapeClosed=!0,p.prototype._lineWidth=1,p.prototype._fillAlpha=0,p.prototype._shape=n.octagon,p.prototype._geometry=[{type:"poly",closed:!0,points:n.d2cross}],e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":10,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],16:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").GenericOrb,n=t("../common/Paths.js"),p=function(t,e){i.call(this,t,e)};p.add=function(t,e){var o=new p(t,e);return t.add.existing(o),o},p.prototype=Object.create(i.prototype),p.prototype.constructor=p,s.mixinPrototype(p.prototype,r.prototype),s.mixinPrototype(p.prototype,a.prototype),p.prototype._lineColor="#ff0000",p.prototype._fillColor="#000000",p.prototype._shapeClosed=!0,p.prototype._lineWidth=1,p.prototype._fillAlpha=0,p.prototype._shape=n.octagon,p.prototype._geometry=[{type:"poly",closed:!0,points:n.d2cross}],e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":10,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],17:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),n=t("../common/UpdateProperties.js").Planetoid,p=t("../common/Paths.js"),c=function(t,e){i.call(this,t,e)};c.add=function(t,e){var o=new c(t,e);return t.add.existing(a),o},c.prototype=Object.create(i.prototype),c.prototype.constructor=c,s.mixinPrototype(c.prototype,r.prototype),s.mixinPrototype(c.prototype,n.prototype),c.prototype._shape=p.octagon,c.prototype._shapeClosed=!0,c.prototype._geometry=[{type:"poly",closed:!0,points:p.d2cross},{type:"poly",closed:!0,points:p.square0},{type:"poly",closed:!0,points:p.square1}],e.exports=c},{"../Starcoder.js":2,"../common/Paths.js":10,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],18:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Ship,n=function(t,e){i.call(this,t,e),e.mass&&(this.body.mass=e.mass),this.tagText=t.add.text(0,this.texture.height/2+1,this.tag,{font:"bold 18px Arial",fill:this.lineColor||"#ffffff",align:"center"}),this.tagText.anchor.setTo(.5,0),this.addChild(this.tagText),this.localState={thrust:"off"},this.game.hud.setLaserColor(this.lineColor)};n.add=function(t,e){var o=new n(t,e);return t.add.existing(o),o},n.prototype=Object.create(i.prototype),n.prototype.constructor=n,s.mixinPrototype(n.prototype,r.prototype),s.mixinPrototype(n.prototype,a.prototype),n.prototype.mapFactor=3,n.prototype.updateTextures=function(){i.prototype.updateTextures.call(this),this.tagText&&(this.tagText.fill=this.lineColor,this.tagText.y=this.texture.height/2+1)},n.prototype.update=function(){switch(i.prototype.update.call(this),this.localState.thrust){case"starting":this.game.sounds.playerthrust.play(),this.game.thrustgenerator.startOn(this),this.localState.thrust="on";break;case"shutdown":this.game.sounds.playerthrust.stop(),this.game.thrustgenerator.stopOn(this),this.localState.thrust="off"}this.game.playerShip===this&&(this.game.hud.setCrystals(this.crystals),this.game.hud.setCharge(this.charge),this.game.hud.setTrees(this.trees))},Object.defineProperty(i.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t,this._dirty=!0}}),e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],19:[function(t,e,o){"use strict";var s=function(t,e){var o=s._textureCache[e];Phaser.Sprite.call(this,t,0,0,o),t.physics.p2.enable(this,!1,!1),this.body.clearShapes();var i=this.body.addParticle();i.sensor=!0};s._textureCache={},s.cacheTexture=function(t,e,o,i,r){var a=t.make.bitmapData(i,i);a.ctx.fillStyle=o,r?(a.ctx.arc(i/2,i/2,i/2,0,2*Math.PI,!1),a.ctx.fill()):a.ctx.fillRect(0,0,i,i),s._textureCache[e]=a},s.prototype=Object.create(Phaser.Sprite.prototype),s.prototype.constructor=s,e.exports=s},{}],20:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").StarTarget,n=t("../common/Paths.js").star,p=function(t,e){i.call(this,t,e)};p.prototype=Object.create(i.prototype),p.prototype.constructor=p,s.mixinPrototype(p.prototype,r.prototype),s.mixinPrototype(p.prototype,a.prototype),p.prototype.drawProcedure=function(t){var e=this.game.physics.p2.mpxi(t),o=e*this.vectorScale,s=Phaser.Color.hexToRGB(this.lineColor);this.graphics.lineStyle(1,s,1);for(var i=0,r=this.stars.length;r>i;i++){for(var a=0,p=n.length;p>a;a++){var c=e*this.stars[i][0]+o*n[a][0],h=e*this.stars[i][1]+o*n[a][1];if(0===a){this.graphics.moveTo(c,h);var l=c,d=h}else this.graphics.lineTo(c,h)}this.graphics.lineTo(l,d)}},e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":10,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],21:[function(t,e,o){var s=function(){};s.prototype.setPosAngle=function(t,e,o){this.body.data.position[0]=-(t||0),this.body.data.position[1]=-(e||0),this.body.data.angle=o||0},s.prototype.config=function(t){for(var e=0,o=this.updateProperties.length;o>e;e++){var s=this.updateProperties[e];"undefined"!=typeof t[s]&&(this[s]=t[s])}},e.exports=s},{}],22:[function(t,e,o){"use strict";var s=t("./SimpleParticle.js"),i="thrust",r=300,a=5,n=150,p=5,c=1,h=.2,l=-20,d=function(t){Phaser.Group.call(this,t),this.thrustingShips={};for(var e=0;r>e;e++){var o=this.add(new s(t,i));o.alpha=.5,o.rotation=Math.PI/4,o.kill()}};d.prototype=Object.create(Phaser.Group.prototype),d.prototype.constructor=d,d.prototype.startOn=function(t){this.thrustingShips[t.id]=t},d.prototype.stopOn=function(t){delete this.thrustingShips[t.id]},d.prototype.update=function(){for(var t=Object.keys(this.thrustingShips),e=0,o=t.length;o>e;e++)for(var s=this.thrustingShips[t[e]],i=s.width,r=Math.sin(s.rotation),d=Math.cos(s.rotation),u=0;a>u;u++){var y=this.getFirstDead();if(!y){console.log("Not enough thrust particles in pool");break}var g=this.game.rnd.realInRange(-h*i,h*i),m=s.x+g*d+l*r,f=s.y+g*r-l*d;y.lifespan=n,y.reset(m,f),y.body.velocity.x=p*(c*r-g*d),y.body.velocity.y=p*(-c*d-g*r)}},d.textureKey=i,e.exports=d},{"./SimpleParticle.js":19}],23:[function(t,e,o){"use strict";var s=function(t,e,o,s,i){Phaser.Text.call(this,t,e,o,s,{font:"14pt Arial",align:"center",fill:"#ffa500"}),this.anchor.setTo(.5,.5);var r={};switch(i.up&&(r.y="-"+i.up),i.down&&(r.y="+"+i.up),i.left&&(r.x="-"+i.up),i.right&&(r.x="+"+i.up),i.type){case"spinner":this.fontSize="20pt",r.rotation=i.revolutions?2*i.revolutions*Math.PI:2*Math.PI;var a=t.add.tween(this).to(r,i.duration,i.easing,!0);a.onComplete.add(function(t){t.kill()})}};s.add=function(t,e,o,i,r){var a=new s(t,e,o,i,r);t.add.existing(a)},s.spinUp=function(t,e,o,i){var r=new s(t,e,o,i,{type:"spinner",revolutions:1,duration:500,easing:Phaser.Easing.Elastic.Out,up:100});t.add.existing(r)},s.prototype=Object.create(Phaser.Text.prototype),s.prototype.constructor=s,e.exports=s},{}],24:[function(t,e,o){"use strict";var s=t("../Starcoder.js"),i=t("./SimpleParticle.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").TractorBeam,n=function(t,e){i.call(this,t,"tractor"),this.setPosAngle(e.x,e.y,e.a)};n.prototype=Object.create(i.prototype),n.prototype.constructor=n,s.mixinPrototype(n.prototype,r.prototype),s.mixinPrototype(n.prototype,a.prototype),e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":11,"./SimpleParticle.js":19,"./SyncBodyInterface.js":21}],25:[function(t,e,o){var s=t("../Starcoder.js"),i=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Tree,n=function(t,e){i.call(this,t,e),this.anchor.setTo(.5,1)};n.add=function(t,e){var o=new n(t,e);return t.add.existing(o),o},n.prototype=Object.create(i.prototype),n.prototype.constructor=n,s.mixinPrototype(n.prototype,r.prototype),s.mixinPrototype(n.prototype,a.prototype),n.prototype.drawProcedure=function(t){var e=Phaser.Color.hexToRGB(this.lineColor);this.graphics.lineStyle(1,e,1),this._drawBranch(this.graph,this.game.physics.p2.mpxi(this.vectorScale)*t,this.depth)},n.prototype._drawBranch=function(t,e,o){for(var s=0,i=t.c.length;i>s;s++){var r=t.c[s];this.graphics.moveTo(t.x*e,t.y*e),this.graphics.lineTo(r.x*e,r.y*e),o>this.step&&this._drawBranch(r,e,o-1)}},Object.defineProperty(n.prototype,"step",{get:function(){return this._step},set:function(t){this._step=t,this._dirty=!0}}),e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":11,"./SyncBodyInterface.js":21,"./VectorSprite.js":26}],26:[function(t,e,o){"use strict";var s={},i={},r=function(t,e){Phaser.Sprite.call(this,t),this.graphics=this.game.sharedGraphics,e.nophysics||(t.physics.p2.enable(this,!1,!1),this.setPosAngle(e.x,e.y,e.a),this.updateBody(),this.body.mass=0),this.config(e.properties),this.visibleOnMap&&(this.minisprite=this.game.minimap.create(),this.minisprite.anchor.setTo(.5,.5)),this.sharedTextureKey?(this.frames=this.getFramePool(this.sharedTextureKey),this.minisprite&&(this.minitexture=this.getMapPool(this.sharedTextureKey)),0===this.frames.length?this.updateTextures():(this.setTexture(this.frames[this.vFrame]),this.minisprite&&this.minisprite.setTexture(this.minitexture))):(this.frames=[],this.minisprite&&(this.minitexture=this.game.add.renderTexture()),this.updateTextures()),this.fps&&(this._msPerFrame=1e3/this.fps,this._lastVFrame=this.game.time.now)};r.add=function(t,e,o){var s=new r(t,e,o);return t.add.existing(s),s},r.prototype=Object.create(Phaser.Sprite.prototype),r.prototype.constructor=r,r.prototype._shape=[[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]],r.prototype._shapeClosed=!0,r.prototype._lineColor="#ffffff",r.prototype._lineWidth=1,r.prototype._fillColor=null,r.prototype._fillAlpha=.25,r.prototype._vectorScale=1,r.prototype.physicsBodyType="circle",r.prototype.numFrames=1,r.prototype.mapFrame=0,r.prototype.vFrame=0,r.prototype.visibleOnMap=!0,r.prototype.getFramePool=function(t){return s[t]?s[t]:s[t]=[]},r.prototype.getMapPool=function(t){return i[t]||(i[t]=this.game.add.renderTexture()),i[t]},r.prototype.setShape=function(t){this.shape=t,this.updateTextures()},r.prototype.setLineStyle=function(t,e){(!e||1>e)&&(e=this.lineWidth||1),this.color=t,this.lineWidth=e,this.updateTextures()},r.prototype.updateTextures=function(){if(1===this.numFrames){this.graphics.clear(),this.graphics._currentBounds=null,"undefined"!=typeof this.drawProcedure?this.drawProcedure(1,0):this.shape&&this.draw(1),this.frames[0]||(this.frames[0]=this.game.add.renderTexture());var t=this.graphics.getLocalBounds();this.frames[0].resize(t.width,t.height,!0),this.frames[0].renderXY(this.graphics,-t.x,-t.y,!0)}else for(var e=0;e<this.numFrames;e++)this.graphics.clear(),this.graphics._currentBounds=null,this.drawProcedure(1,e),this.frames[e]||(this.frames[e]=this.game.add.renderTexture()),t=this.graphics.getLocalBounds(),this.frames[e].resize(t.width,t.height,!0),this.frames[e].renderXY(this.graphics,-t.x,-t.y,!0);if(this.setTexture(this.frames[this.vFrame]),this.minisprite){var o=this.game.minimap.mapScale,s=this.mapFactor||1;this.graphics.clear(),this.graphics._currentBounds=null,"undefined"!=typeof this.drawProcedure?this.drawProcedure(o*s,this.mapFrame):this.shape&&this.draw(o*s),t=this.graphics.getLocalBounds(),this.minitexture.resize(t.width,t.height,!0),this.minitexture.renderXY(this.graphics,-t.x,-t.y,!0),this.minisprite.setTexture(this.minitexture)}this._dirty=!1},r.prototype.updateBody=function(){switch(this.physicsBodyType){case"circle":if("undefined"==typeof this.circle)var t=this.graphics.getBounds(),e=Math.round(Math.sqrt(t.width*t.height)/2);else e=this.radius;this.body.setCircle(e)}},r.prototype.draw=function(t){if(t=t||1,this.shape){var e=Phaser.Color.hexToRGB(this.lineColor);if(1===t)var o=this.lineWidth;else o=1;if(1===t&&this.fillColor){var s=Phaser.Color.hexToRGB(this.fillColor),i=this.fillAlpha||1;this.graphics.beginFill(s,i)}this.graphics.lineStyle(o,e,1),this._drawPolygon(this.shape,this.shapeClosed,t),1===t&&this.fillColor&&this.graphics.endFill()}if(1===t&&this.geometry)for(var r=0,a=this.geometry.length;a>r;r++){var n=this.geometry[r];switch(n.type){case"poly":this._drawPolygon(n.points,n.closed,t)}}},r.prototype._drawPolygon=function(t,e,o){var s=this.game.physics.p2.mpxi(this.vectorScale)*o;t=t.slice(),e&&t.push(t[0]),this.graphics.moveTo(t[0][0]*s,t[0][1]*s);for(var i=1,r=t.length;r>i;i++)this.graphics.lineTo(t[i][0]*s,t[i][1]*s)},r.prototype.update=function(){this._dirty&&this.updateTextures(),this._msPerFrame&&this.game.time.now>=this._lastVFrame+this._msPerFrame&&(this.vFrame=(this.vFrame+1)%this.numFrames,this.setTexture(this.frames[this.vFrame]),this._lastVFrame=this.game.time.now)},Object.defineProperty(r.prototype,"lineColor",{get:function(){return this._lineColor},set:function(t){this._lineColor=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"fillColor",{get:function(){return this._fillColor},set:function(t){this._fillColor=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"fillAlpha",{get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"shapeClosed",{get:function(){return this._shapeClosed},set:function(t){this._shapeClosed=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"vectorScale",{get:function(){return this._vectorScale},set:function(t){this._vectorScale=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"dead",{get:function(){return this._dead},set:function(t){this._dead=t,t?this.kill():this.revive()}}),e.exports=r},{}],27:[function(t,e,o){"use strict";var s=t("../Starcoder-client.js"),i=function(t,e){Phaser.Plugin.call(this,t,e)};i.prototype=Object.create(Phaser.Plugin.prototype),i.prototype.constructor=i,i.prototype.init=function(t){this.queue=t,this.controls=this.game.input.keyboard.createCursorKeys(),this.controls.fire=this.game.input.keyboard.addKey(Phaser.Keyboard.B),this.controls.tractor=this.game.input.keyboard.addKey(Phaser.Keyboard.T),this.joystickState={up:!1,down:!1,left:!1,right:!1,fire:!1},Phaser.VirtualJoystick&&(this.joystick=this.game.starcoder.attachPlugin(Phaser.VirtualJoystick))};var r=0,a=!1,n=!1,p=!1,c=!1,h=!1,l=!1;i.prototype.addVirtualControls=function(t){t=t||"joystick";var e=1;this.stick=this.joystick.addStick(0,0,100,t),this.stick.scale=e,this.firebutton=this.joystick.addButton(0,0,t,"button1-up","button1-down"),this.tractorbutton=this.joystick.addButton(0,0,t,"button2-up","button2-down"),this.firebutton.scale=e,this.tractorbutton.scale=e,this.layoutVirtualControls(e),this.stick.onMove.add(function(t,e,o,s){o>=.35?(this.joystickState.right=!0,this.joystickState.left=!1):-.35>=o?(this.joystickState.right=!1,this.joystickState.left=!0):(this.joystickState.right=!1,this.joystickState.left=!1),s>=.35?(this.joystickState.down=!0,this.joystickState.up=!1):-.35>=s?(this.joystickState.down=!1,this.joystickState.up=!0):(this.joystickState.down=!1,this.joystickState.up=!1)},this),this.stick.onUp.add(function(){this.joystickState.right=!1,this.joystickState.up=!1,this.joystickState.left=!1,this.joystickState.down=!1},this),this.firebutton.onDown.add(function(){this.joystickState.fire=!0},this),this.firebutton.onUp.add(function(){this.joystickState.fire=!1},this),this.tractorbutton.onDown.add(function(){this.joystickState.tractor=!0},this),this.tractorbutton.onUp.add(function(){this.joystickState.tractor=!1},this)},i.prototype.layoutVirtualControls=function(t){var e=this.game.height-125*t,o=this.game.width;this.stick.posX=150*t,this.stick.posY=e,this.firebutton.posX=o-250*t,this.firebutton.posY=e,this.tractorbutton.posX=o-125*t,this.tractorbutton.posY=e},i.prototype.reset=function(){a=n=p=c=!1,this.queue.length=0},i.prototype.preUpdate=function(){var t=this.controls,e=this.joystickState;!e.up&&!t.up.isDown||a||(a=!0,this.queue.push({type:"up_pressed",executed:!1,seq:r++})),e.up||t.up.isDown||!a||(a=!1,this.queue.push({type:"up_released",executed:!1,seq:r++})),!e.down&&!t.down.isDown||n||(n=!0,this.queue.push({type:"down_pressed",executed:!1,seq:r++})),e.down||t.down.isDown||!n||(n=!1,this.queue.push({type:"down_released",executed:!1,seq:r++})),!e.right&&!t.right.isDown||c||(c=!0,this.queue.push({type:"right_pressed",executed:!1,seq:r++})),e.right||t.right.isDown||!c||(c=!1,this.queue.push({type:"right_released",executed:!1,seq:r++})),!e.left&&!t.left.isDown||p||(p=!0,this.queue.push({type:"left_pressed",executed:!1,seq:r++
})),e.left||t.left.isDown||!p||(p=!1,this.queue.push({type:"left_released",executed:!1,seq:r++})),!e.fire&&!t.fire.isDown||h||(h=!0,this.queue.push({type:"fire_pressed",executed:!1,seq:r++})),e.fire||t.fire.isDown||!h||(h=!1,this.queue.push({type:"fire_released",executed:!1,seq:r++})),!e.tractor&&!t.tractor.isDown||l||(l=!0,this.queue.push({type:"tractor_pressed",executed:!1,seq:r++})),e.tractor||t.tractor.isDown||!l||(l=!1,this.queue.push({type:"tractor_released",executed:!1,seq:r++}))};var d;i.prototype.processQueue=function(t,e){for(var o=this.queue,s=0,i=o.length;i>s;s++)d=o[s],d.executed||(t(d),d.etime=this.game.time.now,d.executed=!0);e&&(o.length=0)},s.Controls=i,e.exports=i},{"../Starcoder-client.js":1}],28:[function(t,e,o){"use strict";function s(t,e,o,s){return s=s||1,t+(e-t)*o*s}var i=t("../Starcoder-client.js"),r=8,a=function(t,e){Phaser.Plugin.call(this,t,e)};a.prototype=Object.create(Phaser.Plugin.prototype),a.prototype.constructor=a,a.prototype.init=function(t,e){this.socket=t,this.cmdQueue=e,this.extant={}},a.prototype.start=function(){var t=this,e=this.game.starcoder;this._updateComplete=!1,this.socket.on("disconnect",function(){t.game.paused=!0}),this.socket.on("reconnect",function(){this.game.paused=!1}),this.socket.on("timesync",function(e){t._latency=e-t.game.time.now}),this.socket.on("update",function(o){for(var s=o.r,i=0,a=o.b.length;a>i;i++){var n,p=o.b[i],c=p.id;p.timestamp=s,(n=t.extant[c])?(n.updateQueue.push(p),p.properties&&n.config(p.properties),n.updateQueue.length>r&&n.updateQueue.shift()):(n=e.addBody(p.t,p),n&&(n.serverId=c,t.extant[c]=n,n.updateQueue=[p]))}for(i=0,a=o.rm.length;a>i;i++)c=o.rm[i],t.extant[c]&&(e.removeBody(t.extant[c]),delete t.extant[c])})},a.prototype.update=function(){this._updateComplete||(this._sendCommands(),this._processPhysicsUpdates(),this._updateComplete=!0)},a.prototype.postRender=function(){this._updateComplete=!1};var n,p=[];a.prototype._sendCommands=function(){p.length=0;for(var t=this.cmdQueue.length-1;t>=0;t--)n=this.cmdQueue[t],n.executed&&(p.unshift(n),this.cmdQueue.splice(t,1));p.length&&this.socket.emit("do",p)},a.prototype._processPhysicsUpdates=function(){for(var t=this.game.time.now+this._latency-this.game.starcoder.config.renderLatency,e=Object.keys(this.extant),o=e.length-1;o>=0;o--){for(var i=this.extant[e[o]],r=i.updateQueue,a=null,n=null,p=1;r[p];){if(r[p].timestamp>t){n=r[p],a=r[p-1];break}p++}if(a||n)r.splice(0,p-1);else{if(!(r.length>=2))continue;a=r[r.length-2],n=r[r.length-1]}var c=n.timestamp-a.timestamp,h=(t-a.timestamp)/c;h=Math.min(1,Math.max(0,h)),i.setPosAngle(s(a.x,n.x,h),s(a.y,n.y,h),s(a.a,n.a,h))}},i.ServerSync=a,e.exports=a},{"../Starcoder-client.js":1}],29:[function(t,e,o){"use strict";var s=(t("../phaserplugins/Controls.js"),t("../phaserplugins/SyncClient.js"),function(){});s.prototype=Object.create(Phaser.State.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.game.scale.scaleMode=Phaser.ScaleManager.RESIZE,this.game.scale.onSizeChange.add(function(){console.log("master resize CB")}),this.game.renderer.renderSession.roundPixels=!0,this.game.sharedGraphics=this.game.make.graphics();var t=this.starcoder.config.physicsScale,e=1/t,o=Math.floor;this.game.physics.config={pxm:function(t){return e*t},mpx:function(e){return o(t*e)},pxmi:function(t){return-e*t},mpxi:function(e){return o(-t*e)}},this.starcoder.serverConnect()},s.prototype.preload=function(){this.game.load.image("bar_left","assets/images/greenBarLeft.png"),this.game.load.image("bar_mid","assets/images/greenBarMid.png"),this.game.load.image("bar_right","assets/images/greenBarRight.png")},s.prototype.create=function(){this.game.state.start("loader")},e.exports=s},{"../phaserplugins/Controls.js":27,"../phaserplugins/SyncClient.js":28}],30:[function(t,e,o){"use strict";var s=function(){};s.prototype=Object.create(Phaser.State.prototype),s.prototype.constructor=s,s.prototype.init=function(){this.starcoder.starfield=this.game.make.bitmapData(600,600,"starfield",!0),this.starcoder.drawStarField(this.starcoder.starfield.ctx,600,16),this.game.add.tileSprite(0,0,this.game.width,this.game.height,this.starcoder.starfield);var t=Math.floor(.4*this.game.width),e=(this.game.width-t)/2,o=this.game.add.image(e,this.game.world.centerY,"bar_left");o.anchor.setTo(0,.5);var s=this.game.add.image(e+o.width,this.game.world.centerY,"bar_mid");s.anchor.setTo(0,.5);var i=this.game.add.image(e+o.width,this.game.world.centerY,"bar_right");i.anchor.setTo(0,.5);var r=t-2*o.width;s.width=0;var a=this.game.add.text(this.game.world.centerX,this.game.world.centerY-36,"Loading...",{font:"24px Arial",fill:"#ffffff",align:"center"});a.anchor.setTo(.5);var n=this.game.add.text(e+o.width,this.game.world.centerY,"0%",{font:"24px Arial",fill:"#ffffff",align:"center"});n.anchor.setTo(.5),this.game.load.onFileComplete.add(function(t){var e=Math.floor(r*t/100);s.width=e,i.x=s.x+e,n.setText(t+"%"),n.x=s.x+e/2},this)},s.prototype.preload=function(){this.game.load.bitmapFont("title-font","assets/bitmapfonts/karnivore128.png","assets/bitmapfonts/karnivore128.xml"),this.game.load.bitmapFont("readout-yellow","assets/bitmapfonts/heavy-yellow24.png","assets/bitmapfonts/heavy-yellow24.xml"),this.game.load.audio("playerthrust","assets/sounds/thrustLoop.ogg"),this.game.load.audio("chime","assets/sounds/chime.ogg"),this.game.load.audio("levelup","assets/sounds/levelup.ogg"),this.game.load.audio("planttree","assets/sounds/planttree.ogg"),this.game.load.audio("bigpop","assets/sounds/bigpop.ogg"),this.game.load.audio("littlepop","assets/sounds/littlepop.ogg"),this.game.load.audio("tagged","assets/sounds/tagged.ogg"),this.game.load.audio("laser","assets/sounds/laser.ogg"),this.game.load.audio("music","assets/sounds/ignore.ogg"),this.game.load.atlas("joystick","assets/joystick/generic-joystick.png","assets/joystick/generic-joystick.json")},s.prototype.update=function(){this.starcoder.connected&&this.game.state.start("space")},e.exports=s},{}],31:[function(t,e,o){"use strict";var s=function(){};s.prototype=Object.create(Phaser.State.prototype),s.prototype.constructor=s,s.prototype.init=function(){var t=this;this.starcoder.showLogin(),this.starcoder.socket.on("logged in",function(e){t.starcoder.hideLogin(),t.starcoder.player=e,t.game.state.start("space")}),this.starcoder.socket.on("login failure",function(e){t.starcoder.setLoginError(e)})},s.prototype.create=function(){this.starcoder.starfield=this.game.make.bitmapData(600,600,"starfield",!0),this.starcoder.drawStarField(this.starcoder.starfield.ctx,600,16),this.game.add.tileSprite(0,0,this.game.width,this.game.height,this.starcoder.starfield);var t=this.game.add.bitmapText(this.game.world.centerX,128,"title-font","STARCODER");t.anchor.setTo(.5,.5)},e.exports=s},{}],32:[function(t,e,o){"use strict";var s=t("../phaserbodies/SimpleParticle.js"),i=t("../phaserbodies/ThrustGenerator.js"),r=t("../phaserui/MiniMap.js"),a=t("../phaserui/LeaderBoard.js"),n=t("../phaserbodies/Toast.js"),p=t("../phaserui/HUD.js"),c=t("../phaserplugins/Controls.js"),h=t("../phaserplugins/SyncClient.js"),l=function(){};l.prototype=Object.create(Phaser.State.prototype),l.prototype.constructor=l,l.prototype.init=function(){this.starcoder.controls=this.starcoder.attachPlugin(c,this.starcoder.cmdQueue),this.starcoder.syncclient=this.starcoder.attachPlugin(h,this.starcoder.socket,this.starcoder.cmdQueue),this.stage.disableVisibilityChange=!0},l.prototype.preload=function(){s.cacheTexture(this.game,i.textureKey,"#ff6600",8),s.cacheTexture(this.game,"bullet","#999999",4),s.cacheTexture(this.game,"tractor","#eeeeee",8,!0)},l.prototype.create=function(){console.log("Space size",this.game.width,this.game.height,window.innerWidth,window.innerHeight),window.scrollTo(0,1);var t=this.starcoder.config.worldBounds,e=this.starcoder.config.physicsScale;this.game.physics.startSystem(Phaser.Physics.P2JS),this.world.setBounds.call(this.world,t[0]*e,t[1]*e,(t[2]-t[0])*e,(t[3]-t[1])*e),this.game.physics.p2.setBoundsToWorld(!0,!0,!0,!0,!1),this.starcoder.controls.reset(),this.starcoder.controls.addVirtualControls("joystick"),this.game.sounds={},this.game.sounds.playerthrust=this.game.sound.add("playerthrust",1,!0),this.game.sounds.chime=this.game.sound.add("chime",1,!1),this.game.sounds.planttree=this.game.sound.add("planttree",1,!1),this.game.sounds.bigpop=this.game.sound.add("bigpop",1,!1),this.game.sounds.littlepop=this.game.sound.add("littlepop",1,!1),this.game.sounds.tagged=this.game.sound.add("tagged",1,!1),this.game.sounds.laser=this.game.sound.add("laser",1,!1),this.game.sounds.music=this.game.sound.add("music",1,!0),this.game.sounds.music.play(),this.starcoder.starfield=this.game.make.bitmapData(600,600,"starfield",!0),this.starcoder.drawStarField(this.starcoder.starfield.ctx,600,16),this.game.add.tileSprite(t[0]*e,t[1]*e,(t[2]-t[0])*e,(t[3]-t[1])*e,this.starcoder.starfield),this.starcoder.syncclient.start(),this.starcoder.socket.emit("ready"),this._setupMessageHandlers(this.starcoder.socket),this.game.thrustgenerator=new i(this.game),this.game.playfield=this.game.add.group(),this.game.ui=this.game.add.group(),this.game.ui.fixedToCamera=!0,this.game.hud=new p(this.game,(this.game.width-180)/2,2,180,120),this.game.ui.add(this.game.hud),this.game.minimap=new r(this.game,300,300),this.game.ui.add(this.game.minimap),this.game.minimap.x=10,this.game.minimap.y=10,this.game.leaderboard=new a(this.game,this.starcoder.playerMap,200,300),this.game.ui.add(this.game.leaderboard),this.game.leaderboard.x=this.game.width-200,this.game.leaderboard.y=0,this.game.leaderboard.visible=!1},l.prototype.update=function(){var t=this;this.starcoder.controls.processQueue(function(e){"up_pressed"===e.type?t.game.playerShip.localState.thrust="starting":"up_released"===e.type&&(t.game.playerShip.localState.thrust="shutdown")})},l.prototype.render=function(){},l.prototype._setupMessageHandlers=function(t){var e=this;t.on("msg crystal pickup",function(t){e.game.sounds.chime.play(),n.spinUp(e.game,e.game.playerShip.x,e.game.playerShip.y,"+"+t+" crystals!")}),t.on("msg plant tree",function(t){e.game.sounds.planttree.play()}),t.on("msg asteroid pop",function(t){t>1?e.game.sounds.bigpop.play():e.game.sounds.littlepop.play()}),t.on("msg tagged",function(t){e.game.sounds.tagged.play()}),t.on("msg laser",function(t){e.game.sounds.laser.play()}),t.on("music",function(t){"on"===t?e.game.sounds.music.resume():e.game.sounds.music.pause()})},e.exports=l},{"../phaserbodies/SimpleParticle.js":19,"../phaserbodies/ThrustGenerator.js":22,"../phaserbodies/Toast.js":23,"../phaserplugins/Controls.js":27,"../phaserplugins/SyncClient.js":28,"../phaserui/HUD.js":33,"../phaserui/LeaderBoard.js":34,"../phaserui/MiniMap.js":35}],33:[function(t,e,o){"use strict";var s=t("../common/Paths.js"),i=t("../phaserbodies/Bullet.js"),r=function(t,e,o,s,i){Phaser.Graphics.call(this,t,e,o),this.layout(s,i)};r.prototype=Phaser.Graphics.prototype,r.prototype.constructor=r,r.prototype.layout=function(t,e){var o=Math.floor(t/18),r=Math.floor(e/8);this.lineStyle(2,13421772,1),this.moveTo(0,4*r),this.lineTo(t,4*r),this.drawRect(0,0,t,e),this.codetext=this.game.starcoder.makeFlexText(9*o,2*r,"CODE",{font:"24px Arial",fill:"#ff9900",align:"center"}),this.codetext.anchor.setTo(.5,.5),this.codetext.inputEnabled=!0,this.codetext.events.onInputDown.add(this.game.starcoder.toggleCodeWindow,this.game.starcoder),this.addChild(this.codetext),this.lineStyle(1,65535,1),this.drawPolygon(s.normalize(s.octagon,5,2*o,5*r,!0)),this.drawPolygon(s.normalize(s.d2cross,5,2*o,5*r,!0)),this.crystaltext=this.game.starcoder.makeFlexText(6*o,5.25*r,"0",this.game.starcoder.config.fonts.hudCode),this.crystaltext.anchor.setTo(.5,.5),this.addChild(this.crystaltext),this.lineStyle(1,65280,1);for(var n=0,p=a.length;p>n;n++)this.drawPolygon(s.normalize(a[n],5,11*o,5*r,!1));for(this.treetext=this.game.make.text(15*o,5.25*r,"0",{font:"26px Arial",fill:"#00ff00",align:"center"}),this.treetext.anchor.setTo(.5,.5),this.addChild(this.treetext),this.lasers=[],n=0;5>n;n++){var c=new i(this.game,{nophysics:!0,properties:{lineColor:"#ff0000"}});c.x=2*o+24*n,c.y=7*r,c.anchor.setTo(.5),c.angle=90,this.addChild(c),this.lasers.push(c)}},r.prototype.setLaserColor=function(t){this.lasers[0].config({lineColor:t}),this.lasers[0].updateTextures()},r.prototype.setCrystals=function(t){this.crystaltext.setText(t.toString())},r.prototype.setTrees=function(t){this.treetext.setText(t.toString())},r.prototype.setCharge=function(t){for(var e=0,o=this.lasers.length;o>e;e++)this.lasers[e].visible=t>e?!0:!1};var a=[[[0,2],[0,-2]],[[-2,-2],[0,1],[2,-2]],[[-1,-2],[0,-1],[1,-2]],[[-2,-1],[-1,-.5],[-2,0]],[[2,-1],[1,-.5],[2,0]]];e.exports=r},{"../common/Paths.js":10,"../phaserbodies/Bullet.js":14}],34:[function(t,e,o){"use strict";var s=function(t,e,o,s){Phaser.Group.call(this,t),this.playerMap=e,this.open=!0,this.mainWidth=o,this.mainHeight=s,this.iconSize=24,this.fontSize=18,this.numLines=Math.floor((s-this.iconSize-2)/(this.fontSize+2)),this.main=t.make.group(),this.main.pivot.setTo(o,0),this.main.x=o,this.add(this.main);var i=this.game.make.bitmapData(o,s);i.ctx.fillStyle="rgba(128, 128, 128, 0.25)",i.ctx.fillRect(0,0,o,s),this.main.add(new Phaser.Sprite(t,0,0,i)),this.title=t.starcoder.addFlexText((o-this.iconSize)/2,4,"Tags",this.game.starcoder.config.fonts.leaderBoardTitle,this.main),this.title.anchor.setTo(.5,0),this.lines=[];for(var r=0;r<this.numLines;r++){var a=t.starcoder.addFlexText(4,this.iconSize+2+r*(this.fontSize+2),"-",this.game.starcoder.config.fonts.leaderBoard,this.main);a.kill(),this.lines.push(a)}var n=this.makeButton();n.anchor.setTo(1,0),n.x=o,n.inputEnabled=!0,n.events.onInputDown.add(this.toggleDisplay,this),this.add(n)};s.prototype=Object.create(Phaser.Group.prototype),s.prototype.constructor=s,s.prototype.makeButton=function(){var t=this.iconSize/5,e=this.game.make.bitmapData(this.iconSize,this.iconSize),o=e.ctx;return o.fillStyle="#ffffff",o.beginPath(),o.moveTo(this.iconSize,0),o.lineTo(0,0),o.arc(this.iconSize,0,this.iconSize,Math.PI,3*Math.PI/2,!0),o.fill(),o.strokeStyle="#000000",o.beginPath(),o.moveTo(1.5*t,3*t),o.lineTo(1.5*t,2*t),o.lineTo(2.5*t,2*t),o.lineTo(2.5*t,t),o.lineTo(3.5*t,t),o.lineTo(3.5*t,2*t),o.lineTo(4.5*t,2*t),o.lineTo(4.5*t,3*t),o.closePath(),o.stroke(),new Phaser.Sprite(this.game,0,0,e)},s.prototype.setContent=function(t,e,o){this.title.setText(t);for(var s=!1,i=0;i<this.numLines;i++){var r=e[i]&&e[i].id;if(r&&this.playerMap[r]){var a=this.playerMap[r].tag,n=this.lines[i];n.setText(i+1+". "+a+" ("+e[i].val+")"),r===o?(n.fontWeight="bold",s=!0):n.fontWeight="normal",n.revive()}else this.lines[i].kill()}if(!s){for(i=this.numLines;i<e.length&&e[i].id!==o;i++);i<e.length&&n[this.numLines-1].setText(i+1+". "+this.playerMap[o]+" ("+e[i].val+")")}},s.prototype.toggleDisplay=function(){this.game.tweens.isTweening(this.main.scale)||(this.open?(this.game.add.tween(this.main.scale).to({x:0,y:0},500,Phaser.Easing.Quadratic.Out,!0),this.open=!1):(this.game.add.tween(this.main.scale).to({x:1,y:1},500,Phaser.Easing.Quadratic.Out,!0),this.open=!0))},e.exports=s},{}],35:[function(t,e,o){"use strict";var s=function(t,e,o){Phaser.Group.call(this,t);var s=e/this.game.starcoder.phaserWidth,i=o/this.game.starcoder.phaserHeight;i>=s?(this.mapScale=s,this.xOffset=-s*this.game.starcoder.phaserLeft,this.yOffset=-s*this.game.starcoder.phaserTop+(o-s*this.game.starcoder.phaserHeight)/2):(this.mapScale=i,this.yOffset=-i*this.game.starcoder.phaserTop,this.xOffset=-i*this.game.starcoder.phaserLeft+(e-i*this.game.starcoder.phaserWidth)/2),this.graphics=t.make.graphics(0,0),this.graphics.beginFill(16776960,.2),this.graphics.drawRect(0,0,e,o),this.graphics.endFill(),this.graphics.cacheAsBitmap=!0,this.add(this.graphics)};s.prototype=Object.create(Phaser.Group.prototype),s.prototype.constructor=s,s.prototype.update=function(){for(var t=0,e=this.game.playfield.children.length;e>t;t++){var o=this.game.playfield.children[t];o.minisprite&&(o.minisprite.x=this.worldToMmX(o.x),o.minisprite.y=this.worldToMmY(o.y),o.minisprite.angle=o.angle)}},s.prototype.worldToMmX=function(t){return t*this.mapScale+this.xOffset},s.prototype.worldToMmY=function(t){return t*this.mapScale+this.yOffset},e.exports=s},{}],36:[function(t,e,o){"use strict";var s=t("./common/config.js"),i=t("./client/config.js"),r=r||{},a=t("./Starcoder-client.js");r.buildTime="Sun Sep 13 2015 21:13:12 GMT-0400 (EDT)",$(function(){var t=new a([s,i,r]);t.start()})},{"./Starcoder-client.js":1,"./client/config.js":9,"./common/config.js":12}]},{},[36]);