!function t(e,o,i){function s(a,n){if(!o[a]){if(!e[a]){var p="function"==typeof require&&require;if(!n&&p)return p(a,!0);if(r)return r(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=o[a]={exports:{}};e[a][0].call(c.exports,function(t){var o=e[a][1][t];return s(o?o:t)},c,c.exports,t,e,o,i)}return o[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e,o){"use strict";var i=t("./Starcoder.js"),s=t("./client-components/WorldApi.js"),r=t("./client-components/DOMInterface.js"),a=t("./client-components/CodeEndpointClient.js"),n=t("./client-components/Starfield.js"),p=t("./client-components/LeaderBoardClient.js"),h={boot:t("./phaserstates/Boot.js"),space:t("./phaserstates/Space.js"),login:t("./phaserstates/Login.js"),loader:t("./phaserstates/Loader.js")};i.prototype.init=function(){this.io=io,this.game=new Phaser.Game("100%","100%",Phaser.AUTO,"main"),this.game.forceSingleUpdate=!0,this.game.starcoder=this;for(var t in h){var e=new h[t];e.starcoder=this,this.game.state.add(t,e)}this.onConnectCB=[],this.playerMap={},this.cmdQueue=[],this.connected=!1,this.lastNetError=null,this.implementFeature(s),this.implementFeature(a),this.implementFeature(n),this.implementFeature(p),this.implementFeature(r)},i.prototype.serverConnect=function(){var t=this;this.socket||(delete this.socket,this.connected=!1,this.lastNetError=null);var e=this.config.serverUri;if(!e){var o=this.config.serverProtol||window.location.protocol,i=this.config.serverPort||"8080";e=o+"//"+window.location.hostname+":"+i}this.socket=this.io(e,this.config.ioClientOptions),this.socket.on("connect",function(){console.log("socket connected"),t.connected=!0,t.lastNetError=null;for(var e=0,o=t.onConnectCB.length;o>e;e++)t.onConnectCB[e].bind(t,t.socket)()}),this.socket.on("error",function(t){console.log("socket error"),console.log(t),this.lastNetError=t})},i.prototype.serverLogin=function(t,e){var o={};e?(o.username=t,o.password=e):o.gamertag=t,this.socket.emit("login",o)},i.prototype.start=function(){this.game.state.start("boot")},i.prototype.attachPlugin=function(){var t=this.game.plugins.add.apply(this.game.plugins,arguments);return t.starcoder=this,t.log=this.log,t},i.prototype.role="Client",e.exports=i},{"./Starcoder.js":2,"./client-components/CodeEndpointClient.js":3,"./client-components/DOMInterface.js":4,"./client-components/LeaderBoardClient.js":5,"./client-components/Starfield.js":6,"./client-components/WorldApi.js":7,"./phaserstates/Boot.js":26,"./phaserstates/Loader.js":27,"./phaserstates/Login.js":28,"./phaserstates/Space.js":29}],2:[function(t,e,o){"use strict";var i={version:"0.1",worldBounds:[-200,-200,200,200],ioClientOptions:{reconnection:!1},updateInterval:50,renderLatency:100,physicsScale:20,frameRate:1/60,timeSyncFreq:10,physicsProperties:{Ship:{mass:10},Asteroid:{mass:20}},gamerTags:{1:["super","awesome","rainbow","double","triple","vampire","princess","ice","fire","robot","werewolf","sparkle","infinite","cool","yolo","swaggy","zombie","samurai","dancing","power","gold","silver","radioactive","quantum","brilliant","mighty","random"],2:["tiger","ninja","princess","robot","pony","dancer","rocker","master","hacker","rainbow","kitten","puppy","boss","wizard","hero","dragon","tribute","genius","blaster","spider"]},initialBodies:[{type:"Asteroid",number:25,config:{position:{random:"world"},velocity:{random:"vector",lo:-15,hi:15},angularVelocity:{random:"float",lo:-5,hi:5},vectorScale:{random:"float",lo:.6,hi:1.4},mass:10}},{type:"Planetoid",number:6,config:{position:{random:"world",pad:30},angularVelocity:{random:"float",lo:-2,hi:2},vectorScale:2.5,mass:100}}]},s=function(){this.config=i,this.banner(),this.init.apply(this,arguments)};s.prototype.extendConfig=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.config[e]=t[e])},Object.defineProperty(s.prototype,"worldWidth",{get:function(){return this.config.worldBounds[2]-this.config.worldBounds[0]}}),Object.defineProperty(s.prototype,"phaserWidth",{get:function(){return this.config.physicsScale*(this.config.worldBounds[2]-this.config.worldBounds[0])}}),Object.defineProperty(s.prototype,"worldHeight",{get:function(){return this.config.worldBounds[3]-this.config.worldBounds[1]}}),Object.defineProperty(s.prototype,"phaserHeight",{get:function(){return this.config.physicsScale*(this.config.worldBounds[3]-this.config.worldBounds[1])}}),Object.defineProperty(s.prototype,"phaserLeft",{get:function(){return this.config.physicsScale*this.config.worldBounds[0]}}),Object.defineProperty(s.prototype,"phaserTop",{get:function(){return this.config.physicsScale*this.config.worldBounds[1]}}),Object.defineProperty(s.prototype,"phaserRight",{get:function(){return this.config.physicsScale*this.config.worldBounds[2]}}),Object.defineProperty(s.prototype,"phaserBottom",{get:function(){return this.config.physicsScale*this.config.worldBounds[3]}}),s.mixinPrototype=function(t,e){for(var o=Object.keys(e),i=0;i<o.length;i++){var s=o[i],r=e[s];!r||"function"!=typeof r.get&&"function"!=typeof r.set?t[s]=r:Object.defineProperty(t,s,r)}},s.prototype.implementFeature=function(t){for(var e in t)switch(e){case"onConnectCB":case"onReadyCB":case"onLoginCB":case"onDisconnectCB":this[e].push(t[e]);break;case"init":break;default:s.prototype[e]=t[e]}t.init&&t.init.call(this)},s.prototype.banner=function(){this.log("Starcoder",this.role,"v"+this.config.version,"started at",Date())},s.prototype.log=function(){console.log.apply(console,Array.prototype.slice.call(arguments))},e.exports=s},{}],3:[function(t,e,o){"use strict";e.exports={sendCode:function(t){this.socket.emit("code",t)}}},{}],4:[function(t,e,o){"use strict";e.exports={init:function(){var t=this;this.dom={},this.dom.codeButton=$("#code-btn"),this.dom.codePopup=$("#code-popup"),this.dom.loginPopup=$("#login"),this.dom.loginButton=$("#submit"),this.dom.codeButton.on("click",function(){t.dom.codePopup.toggle("slow")}),$(window).on("message",function(e){e.originalEvent.source===t.dom.codePopup[0].contentWindow&&t.sendCode(e.originalEvent.data)});for(var e=1;2>=e;e++)for(var o=this.config.gamerTags[e],i=0,s=o.length;s>i;i++)$("#gt"+e).append("<option>"+o[i]+"</option>");$(".select").selectmenu(),$(".loginbutton").button({icons:{primary:"ui-icon-triangle-1-e"}}),$(".accordion").accordion({heightStyle:"content"}),$(".hidden").hide()},layoutDOMSpaceState:function(){$("#code-btn").show().position({my:"left bottom",at:"left bottom",of:"#main"}),$("#code-popup").position({my:"center",at:"center",of:window})},showLogin:function(){var t=this;$("#login-window .message").hide(),$("#login-window").show().position({my:"center",at:"center",of:window}),$("#userlogin").on("click",function(){t.serverLogin($("#username").val(),$("#password").val())}),$("#guestlogin").on("click",function(){t.serverLogin($("#gt1").val()+" "+$("#gt2").val())})},setLoginError:function(t){var e=$("#login-window .message");t?(e.html(t),e.show()):e.hide()},hideLogin:function(){$("#login-window").hide()}}},{}],5:[function(t,e,o){"use strict";e.exports={init:function(){this.leaderBoard={},this.leaderBoardCats=[],this.leaderBoardState=null},onConnectCB:function(t){var e=this;t.on("leaderboard",function(t){for(var o in t)o in e.leaderBoard||e.leaderBoardCats.push(o),null===e.leaderBoardState&&(e.leaderBoardState=0,e.game.leaderboard.visible=!0,setInterval(e.cycleLeaderBoard.bind(e),e.config.leaderBoardClientCycle||5e3)),e.leaderBoardCats[e.leaderBoardState]===o&&e.game.leaderboard.setContent(o,t[o],e.player.id),e.leaderBoard[o]=t[o]})},cycleLeaderBoard:function(){this.leaderBoardState=(this.leaderBoardState+1)%this.leaderBoardCats.length;var t=this.leaderBoardCats[this.leaderBoardState];this.game.leaderboard.setContent(t,this.leaderBoard[t],this.player.id)}}},{}],6:[function(t,e,o){"use strict";e.exports={randomNormal:function(){for(var t=0,e=0;6>e;e++)t+=this.game.rnd.normal();return t/6},drawStar:function(t,e,o,i,s){t.strokeStyle=s,t.beginPath(),t.moveTo(e-i+1,o-i+1),t.lineTo(e+i-1,o+i-1),t.moveTo(e-i+1,o+i-1),t.lineTo(e+i-1,o-i+1),t.moveTo(e,o-i),t.lineTo(e,o+i),t.moveTo(e-i,o),t.lineTo(e+i,o),t.stroke()},drawStarField:function(t,e,o){var i,s,r,a,n,p=Math.round(e/2+this.randomNormal()*e/4),h=Math.round(e/2+this.randomNormal()*e/4),c=[[0,0,p-1,h-1],[p,0,e-1,h-1],[0,h,p-1,e-1],[p,h,e-1,e-1]];for(o=Math.round(o/4),s=0,a=c.length;a>s;s++)for(n=c[s],r=0;o>r;r++)i="hsl(60,100%,"+this.game.rnd.between(90,99)+"%)",this.drawStar(t,this.game.rnd.between(n[0]+7,n[2]-7),this.game.rnd.between(n[1]+7,n[3]-7),this.game.rnd.between(2,4),i)}}},{}],7:[function(t,e,o){"use strict";e.exports={addBody:function(t,e){var o=i[t],s=!1;if(!o)return this.log("Unknown body type:",t),void this.log(e);"Ship"===t&&e.properties.playerid===this.player.id&&(e.mass=this.config.physicsProperties.Ship.mass,s=!0);var r=new o(this.game,e);return"Ship"===t&&(this.playerMap[e.properties.playerid]=r),this.game.playfield.add(r),s&&(this.game.camera.follow(r),this.game.playerShip=r),r},removeBody:function(t){t.destroy(),t.minisprite&&t.minisprite.destroy()}};var i={Ship:t("../phaserbodies/Ship.js"),Asteroid:t("../phaserbodies/Asteroid.js"),Crystal:t("../phaserbodies/Crystal.js"),Bullet:t("../phaserbodies/Bullet.js"),GenericOrb:t("../phaserbodies/GenericOrb.js"),Planetoid:t("../phaserbodies/Planetoid.js"),Tree:t("../phaserbodies/Tree.js"),TractorBeam:t("../phaserbodies/TractorBeam.js"),StarTarget:t("../phaserbodies/StarTarget.js")}},{"../phaserbodies/Asteroid.js":10,"../phaserbodies/Bullet.js":11,"../phaserbodies/Crystal.js":12,"../phaserbodies/GenericOrb.js":13,"../phaserbodies/Planetoid.js":14,"../phaserbodies/Ship.js":15,"../phaserbodies/StarTarget.js":17,"../phaserbodies/TractorBeam.js":21,"../phaserbodies/Tree.js":22}],8:[function(t,e,o){"use strict";var i=Math.PI,s=2*i,r=Math.sin,a=Math.cos;o.octagon=[[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]],o.d2cross=[[-1,-2],[-1,2],[2,-1],[-2,-1],[1,2],[1,-2],[-2,1],[2,1]],o.square0=[[-1,-2],[2,-1],[1,2],[-2,1]],o.square1=[[1,-2],[2,1],[-1,2],[-2,-1]],o.star=[[r(0),a(0)],[r(2*s/5),a(2*s/5)],[r(4*s/5),a(4*s/5)],[r(s/5),a(s/5)],[r(3*s/5),a(3*s/5)]],o.OCTRADIUS=Math.sqrt(5)},{}],9:[function(t,e,o){"use strict";var i=function(){};i.prototype.updateProperties=["lineWidth","lineColor","fillColor","fillAlpha","vectorScale","shape","shapeClosed","playerid","crystals","dead","tag"];var s=function(){};s.prototype.updateProperties=["vectorScale"];var r=function(){};r.prototype.updateProperties=["vectorScale"];var a=function(){};a.prototype.updateProperties=["lineColor","vectorScale"];var n=function(){};n.prototype.updateProperties=["lineColor","fillColor","lineWidth","fillAlpha","vectorScale","owner"];var p=function(){};p.prototype.updateProperties=["vectorScale","lineColor","graph","step","depth"];var h=function(){};h.prototype.updateProperties=["lineColor"];var c=function(){};c.prototype.updateProperties=[];var d=function(){};d.prototype.updateProperties=["stars","lineColor","vectorScale"],o.Ship=i,o.Asteroid=s,o.Crystal=r,o.GenericOrb=a,o.Bullet=h,o.Planetoid=n,o.Tree=p,o.TractorBeam=c,o.StarTarget=d},{}],10:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Asteroid,n=t("../common/Paths.js"),p=function(t,e){s.call(this,t,e)};p.add=function(t,e){var o=new p(t,e);return t.add.existing(o),o},p.prototype=Object.create(s.prototype),p.prototype.constructor=p,i.mixinPrototype(p.prototype,r.prototype),i.mixinPrototype(p.prototype,a.prototype),p.prototype._lineColor="#ff00ff",p.prototype._fillColor="#ff0000",p.prototype._shapeClosed=!0,p.prototype._lineWidth=1,p.prototype._fillAlpha=.25,p.prototype._shape=n.octagon,e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":8,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],11:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Bullet,n=function(t,e){s.call(this,t,e),this.setPosAngle(e.x,e.y,e.a)};n.prototype=Object.create(s.prototype),n.prototype.constructor=n,i.mixinPrototype(n.prototype,r.prototype),i.mixinPrototype(n.prototype,a.prototype),n.prototype.visibleOnMap=!1,n.prototype.sharedTextureKey="laser",n.prototype.drawProcedure=function(t,e){var o=this.game.physics.p2.mpxi(this.vectorScale)*t;this.graphics.lineStyle(4,Phaser.Color.hexToRGB(this.lineColor),1),this.graphics.moveTo(0,0),this.graphics.lineTo(0,1*o)},e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],12:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Crystal,n=t("../common/Paths.js"),p=function(t,e){s.call(this,t,e)};p.add=function(t,e){var o=new p(t,e);return t.add.existing(o),o},p.prototype=Object.create(s.prototype),p.prototype.constructor=p,i.mixinPrototype(p.prototype,r.prototype),i.mixinPrototype(p.prototype,a.prototype),p.prototype._lineColor="#00ffff",p.prototype._fillColor="#000000",p.prototype._shapeClosed=!0,p.prototype._lineWidth=1,p.prototype._fillAlpha=0,p.prototype._shape=n.octagon,p.prototype._geometry=[{type:"poly",closed:!0,points:n.d2cross}],e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":8,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],13:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").GenericOrb,n=t("../common/Paths.js"),p=function(t,e){s.call(this,t,e)};p.add=function(t,e){var o=new p(t,e);return t.add.existing(o),o},p.prototype=Object.create(s.prototype),p.prototype.constructor=p,i.mixinPrototype(p.prototype,r.prototype),i.mixinPrototype(p.prototype,a.prototype),p.prototype._lineColor="#ff0000",p.prototype._fillColor="#000000",p.prototype._shapeClosed=!0,p.prototype._lineWidth=1,p.prototype._fillAlpha=0,p.prototype._shape=n.octagon,p.prototype._geometry=[{type:"poly",closed:!0,points:n.d2cross}],e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":8,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],14:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),n=t("../common/UpdateProperties.js").Planetoid,p=t("../common/Paths.js"),h=function(t,e){s.call(this,t,e)};h.add=function(t,e){var o=new h(t,e);return t.add.existing(a),o},h.prototype=Object.create(s.prototype),h.prototype.constructor=h,i.mixinPrototype(h.prototype,r.prototype),i.mixinPrototype(h.prototype,n.prototype),h.prototype._shape=p.octagon,h.prototype._shapeClosed=!0,h.prototype._geometry=[{type:"poly",closed:!0,points:p.d2cross},{type:"poly",closed:!0,points:p.square0},{type:"poly",closed:!0,points:p.square1}],e.exports=h},{"../Starcoder.js":2,"../common/Paths.js":8,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],15:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Ship,n=function(t,e){s.call(this,t,e),e.mass&&(this.body.mass=e.mass),this.tagText=t.add.text(0,this.texture.height/2+1,this.tag,{font:"bold 18px Arial",fill:this.lineColor||"#ffffff",align:"center"}),this.tagText.anchor.setTo(.5,0),this.addChild(this.tagText),this.localState={thrust:"off"}};n.add=function(t,e){var o=new n(t,e);return t.add.existing(o),o},n.prototype=Object.create(s.prototype),n.prototype.constructor=n,i.mixinPrototype(n.prototype,r.prototype),i.mixinPrototype(n.prototype,a.prototype),n.prototype.mapFactor=3,n.prototype.updateTextures=function(){s.prototype.updateTextures.call(this),this.tagText&&(this.tagText.fill=this.lineColor,this.tagText.y=this.texture.height/2+1)},n.prototype.update=function(){switch(s.prototype.update.call(this),this.localState.thrust){case"starting":this.game.sounds.playerthrust.play(),this.game.thrustgenerator.startOn(this),this.localState.thrust="on";break;case"shutdown":this.game.sounds.playerthrust.stop(),this.game.thrustgenerator.stopOn(this),this.localState.thrust="off"}this.game.playerShip===this&&this.game.inventorytext.setText(this.crystals.toString())},Object.defineProperty(s.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t,this._dirty=!0}}),e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],16:[function(t,e,o){"use strict";var i=function(t,e){var o=i._textureCache[e];Phaser.Sprite.call(this,t,0,0,o),t.physics.p2.enable(this,!1,!1),this.body.clearShapes();var s=this.body.addParticle();s.sensor=!0};i._textureCache={},i.cacheTexture=function(t,e,o,s,r){var a=t.make.bitmapData(s,s);a.ctx.fillStyle=o,r?(a.ctx.arc(s/2,s/2,s/2,0,2*Math.PI,!1),a.ctx.fill()):a.ctx.fillRect(0,0,s,s),i._textureCache[e]=a},i.prototype=Object.create(Phaser.Sprite.prototype),i.prototype.constructor=i,e.exports=i},{}],17:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").StarTarget,n=t("../common/Paths.js").star,p=function(t,e){s.call(this,t,e)};p.prototype=Object.create(s.prototype),p.prototype.constructor=p,i.mixinPrototype(p.prototype,r.prototype),i.mixinPrototype(p.prototype,a.prototype),p.prototype.drawProcedure=function(t){var e=this.game.physics.p2.mpxi(t),o=e*this.vectorScale,i=Phaser.Color.hexToRGB(this.lineColor);this.graphics.lineStyle(1,i,1);for(var s=0,r=this.stars.length;r>s;s++){for(var a=0,p=n.length;p>a;a++){var h=e*this.stars[s][0]+o*n[a][0],c=e*this.stars[s][1]+o*n[a][1];if(0===a){this.graphics.moveTo(h,c);var d=h,l=c}else this.graphics.lineTo(h,c)}this.graphics.lineTo(d,l)}},e.exports=p},{"../Starcoder.js":2,"../common/Paths.js":8,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],18:[function(t,e,o){var i=function(){};i.prototype.setPosAngle=function(t,e,o){this.body.data.position[0]=-(t||0),this.body.data.position[1]=-(e||0),this.body.data.angle=o||0},i.prototype.config=function(t){for(var e=0,o=this.updateProperties.length;o>e;e++){var i=this.updateProperties[e];"undefined"!=typeof t[i]&&(this[i]=t[i])}},e.exports=i},{}],19:[function(t,e,o){"use strict";var i=t("./SimpleParticle.js"),s="thrust",r=300,a=5,n=150,p=5,h=1,c=.2,d=-20,l=function(t){Phaser.Group.call(this,t),this.thrustingShips={};for(var e=0;r>e;e++){var o=this.add(new i(t,s));o.alpha=.5,o.rotation=Math.PI/4,o.kill()}};l.prototype=Object.create(Phaser.Group.prototype),l.prototype.constructor=l,l.prototype.startOn=function(t){this.thrustingShips[t.id]=t},l.prototype.stopOn=function(t){delete this.thrustingShips[t.id]},l.prototype.update=function(){for(var t=Object.keys(this.thrustingShips),e=0,o=t.length;o>e;e++)for(var i=this.thrustingShips[t[e]],s=i.width,r=Math.sin(i.rotation),l=Math.cos(i.rotation),u=0;a>u;u++){var g=this.getFirstDead();if(!g){console.log("Not enough thrust particles in pool");break}var y=this.game.rnd.realInRange(-c*s,c*s),m=i.x+y*l+d*r,f=i.y+y*r-d*l;g.lifespan=n,g.reset(m,f),g.body.velocity.x=p*(h*r-y*l),g.body.velocity.y=p*(-h*l-y*r)}},l.textureKey=s,e.exports=l},{"./SimpleParticle.js":16}],20:[function(t,e,o){"use strict";var i=function(t,e,o,i,s){Phaser.Text.call(this,t,e,o,i,{font:"14pt Arial",align:"center",fill:"#ffa500"}),this.anchor.setTo(.5,.5);var r={};switch(s.up&&(r.y="-"+s.up),s.down&&(r.y="+"+s.up),s.left&&(r.x="-"+s.up),s.right&&(r.x="+"+s.up),s.type){case"spinner":this.fontSize="20pt",r.rotation=s.revolutions?2*s.revolutions*Math.PI:2*Math.PI;var a=t.add.tween(this).to(r,s.duration,s.easing,!0);a.onComplete.add(function(t){t.kill()})}};i.add=function(t,e,o,s,r){var a=new i(t,e,o,s,r);t.add.existing(a)},i.spinUp=function(t,e,o,s){var r=new i(t,e,o,s,{type:"spinner",revolutions:1,duration:500,easing:Phaser.Easing.Elastic.Out,up:100});t.add.existing(r)},i.prototype=Object.create(Phaser.Text.prototype),i.prototype.constructor=i,e.exports=i},{}],21:[function(t,e,o){"use strict";var i=t("../Starcoder.js"),s=t("./SimpleParticle.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").TractorBeam,n=function(t,e){s.call(this,t,"tractor"),this.setPosAngle(e.x,e.y,e.a)};n.prototype=Object.create(s.prototype),n.prototype.constructor=n,i.mixinPrototype(n.prototype,r.prototype),i.mixinPrototype(n.prototype,a.prototype),e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":9,"./SimpleParticle.js":16,"./SyncBodyInterface.js":18}],22:[function(t,e,o){var i=t("../Starcoder.js"),s=t("./VectorSprite.js"),r=t("./SyncBodyInterface.js"),a=t("../common/UpdateProperties.js").Tree,n=function(t,e){s.call(this,t,e),this.anchor.setTo(.5,1)};n.add=function(t,e){var o=new n(t,e);return t.add.existing(o),o},n.prototype=Object.create(s.prototype),n.prototype.constructor=n,i.mixinPrototype(n.prototype,r.prototype),i.mixinPrototype(n.prototype,a.prototype),n.prototype.drawProcedure=function(t){var e=Phaser.Color.hexToRGB(this.lineColor);this.graphics.lineStyle(1,e,1),this._drawBranch(this.graph,this.game.physics.p2.mpxi(this.vectorScale)*t,this.depth)},n.prototype._drawBranch=function(t,e,o){for(var i=0,s=t.c.length;s>i;i++){var r=t.c[i];this.graphics.moveTo(t.x*e,t.y*e),this.graphics.lineTo(r.x*e,r.y*e),o>this.step&&this._drawBranch(r,e,o-1)}},Object.defineProperty(n.prototype,"step",{get:function(){return this._step},set:function(t){this._step=t,this._dirty=!0}}),e.exports=n},{"../Starcoder.js":2,"../common/UpdateProperties.js":9,"./SyncBodyInterface.js":18,"./VectorSprite.js":23}],23:[function(t,e,o){"use strict";var i={},s={},r=function(t,e){Phaser.Sprite.call(this,t),this.graphics=this.game.sharedGraphics,t.physics.p2.enable(this,!1,!1),this.setPosAngle(e.x,e.y,e.a),this.config(e.properties),this.visibleOnMap&&(this.minisprite=this.game.minimap.create(),this.minisprite.anchor.setTo(.5,.5)),this.sharedTextureKey?(this.frames=this.getFramePool(this.sharedTextureKey),this.minisprite&&(this.minitexture=this.getMapPool(this.sharedTextureKey)),0===this.frames.length?this.updateTextures():(this.setTexture(this.frames[this.vFrame]),this.minisprite&&this.minisprite.setTexture(this.minitexture))):(this.frames=[],this.minisprite&&(this.minitexture=this.game.add.renderTexture()),this.updateTextures()),this.fps&&(this._msPerFrame=1e3/this.fps,this._lastVFrame=this.game.time.now),this.updateBody(),this.body.mass=0};r.add=function(t,e,o){var i=new r(t,e,o);return t.add.existing(i),i},r.prototype=Object.create(Phaser.Sprite.prototype),r.prototype.constructor=r,r.prototype._shape=[[2,1],[1,2],[-1,2],[-2,1],[-2,-1],[-1,-2],[1,-2],[2,-1]],r.prototype._shapeClosed=!0,r.prototype._lineColor="#ffffff",r.prototype._lineWidth=1,r.prototype._fillColor=null,r.prototype._fillAlpha=.25,r.prototype._vectorScale=1,r.prototype.physicsBodyType="circle",r.prototype.numFrames=1,r.prototype.mapFrame=0,r.prototype.vFrame=0,r.prototype.visibleOnMap=!0,r.prototype.getFramePool=function(t){return i[t]?i[t]:i[t]=[]},r.prototype.getMapPool=function(t){return s[t]||(s[t]=this.game.add.renderTexture()),s[t]},r.prototype.setShape=function(t){this.shape=t,this.updateTextures()},r.prototype.setLineStyle=function(t,e){(!e||1>e)&&(e=this.lineWidth||1),this.color=t,this.lineWidth=e,this.updateTextures()},r.prototype.updateTextures=function(){if(1===this.numFrames){this.graphics.clear(),this.graphics._currentBounds=null,"undefined"!=typeof this.drawProcedure?this.drawProcedure(1,0):this.shape&&this.draw(1),this.frames[0]||(this.frames[0]=this.game.add.renderTexture());var t=this.graphics.getLocalBounds();this.frames[0].resize(t.width,t.height,!0),this.frames[0].renderXY(this.graphics,-t.x,-t.y,!0)}else for(var e=0;e<this.numFrames;e++)this.graphics.clear(),this.graphics._currentBounds=null,this.drawProcedure(1,e),this.frames[e]||(this.frames[e]=this.game.add.renderTexture()),t=this.graphics.getLocalBounds(),this.frames[e].resize(t.width,t.height,!0),this.frames[e].renderXY(this.graphics,-t.x,-t.y,!0);if(this.setTexture(this.frames[this.vFrame]),this.minisprite){var o=this.game.minimap.mapScale,i=this.mapFactor||1;this.graphics.clear(),this.graphics._currentBounds=null,"undefined"!=typeof this.drawProcedure?this.drawProcedure(o*i,this.mapFrame):this.shape&&this.draw(o*i),t=this.graphics.getLocalBounds(),this.minitexture.resize(t.width,t.height,!0),this.minitexture.renderXY(this.graphics,-t.x,-t.y,!0),this.minisprite.setTexture(this.minitexture)}this._dirty=!1},r.prototype.updateBody=function(){switch(this.physicsBodyType){case"circle":if("undefined"==typeof this.circle)var t=this.graphics.getBounds(),e=Math.round(Math.sqrt(t.width*t.height)/2);else e=this.radius;this.body.setCircle(e)}},r.prototype.draw=function(t){if(t=t||1,this.shape){var e=Phaser.Color.hexToRGB(this.lineColor);if(1===t)var o=this.lineWidth;else o=1;if(1===t&&this.fillColor){var i=Phaser.Color.hexToRGB(this.fillColor),s=this.fillAlpha||1;this.graphics.beginFill(i,s)}this.graphics.lineStyle(o,e,1),this._drawPolygon(this.shape,this.shapeClosed,t),1===t&&this.fillColor&&this.graphics.endFill()}if(1===t&&this.geometry)for(var r=0,a=this.geometry.length;a>r;r++){var n=this.geometry[r];switch(n.type){case"poly":this._drawPolygon(n.points,n.closed,t)}}},r.prototype._drawPolygon=function(t,e,o){var i=this.game.physics.p2.mpxi(this.vectorScale)*o;t=t.slice(),e&&t.push(t[0]),this.graphics.moveTo(t[0][0]*i,t[0][1]*i);for(var s=1,r=t.length;r>s;s++)this.graphics.lineTo(t[s][0]*i,t[s][1]*i)},r.prototype.update=function(){this._dirty&&this.updateTextures(),this._msPerFrame&&this.game.time.now>=this._lastVFrame+this._msPerFrame&&(this.vFrame=(this.vFrame+1)%this.numFrames,this.setTexture(this.frames[this.vFrame]),this._lastVFrame=this.game.time.now)},Object.defineProperty(r.prototype,"lineColor",{get:function(){return this._lineColor},set:function(t){this._lineColor=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"fillColor",{get:function(){return this._fillColor},set:function(t){this._fillColor=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"fillAlpha",{get:function(){return this._fillAlpha},set:function(t){this._fillAlpha=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"shapeClosed",{get:function(){return this._shapeClosed},set:function(t){this._shapeClosed=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"vectorScale",{get:function(){return this._vectorScale},set:function(t){this._vectorScale=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry=t,this._dirty=!0}}),Object.defineProperty(r.prototype,"dead",{get:function(){return this._dead},set:function(t){this._dead=t,t?this.kill():this.revive()}}),e.exports=r},{}],24:[function(t,e,o){"use strict";var i=t("../Starcoder-client.js"),s=function(t,e){Phaser.Plugin.call(this,t,e)};s.prototype=Object.create(Phaser.Plugin.prototype),s.prototype.constructor=s,s.prototype.init=function(t){this.queue=t,this.controls=this.game.input.keyboard.createCursorKeys(),this.controls.fire=this.game.input.keyboard.addKey(Phaser.Keyboard.B),this.controls.tractor=this.game.input.keyboard.addKey(Phaser.Keyboard.T),this.joystickState={up:!1,down:!1,left:!1,right:!1,fire:!1},Phaser.VirtualJoystick&&(this.joystick=this.game.starcoder.attachPlugin(Phaser.VirtualJoystick))};var r=0,a=!1,n=!1,p=!1,h=!1,c=!1,d=!1;s.prototype.addVirtualControls=function(t){t=t||"joystick";var e=1;this.stick=this.joystick.addStick(0,0,100,t),this.stick.scale=e,this.firebutton=this.joystick.addButton(0,0,t,"button1-up","button1-down"),this.tractorbutton=this.joystick.addButton(0,0,t,"button2-up","button2-down"),this.firebutton.scale=e,this.tractorbutton.scale=e,this.layoutVirtualControls(e),this.stick.onMove.add(function(t,e,o,i){o>=.35?(this.joystickState.right=!0,this.joystickState.left=!1):-.35>=o?(this.joystickState.right=!1,this.joystickState.left=!0):(this.joystickState.right=!1,this.joystickState.left=!1),i>=.35?(this.joystickState.down=!0,this.joystickState.up=!1):-.35>=i?(this.joystickState.down=!1,this.joystickState.up=!0):(this.joystickState.down=!1,this.joystickState.up=!1)},this),this.stick.onUp.add(function(){this.joystickState.right=!1,this.joystickState.up=!1,this.joystickState.left=!1,this.joystickState.down=!1},this),this.firebutton.onDown.add(function(){this.joystickState.fire=!0},this),this.firebutton.onUp.add(function(){this.joystickState.fire=!1},this),this.tractorbutton.onDown.add(function(){this.joystickState.tractor=!0},this),this.tractorbutton.onUp.add(function(){this.joystickState.tractor=!1},this)},s.prototype.layoutVirtualControls=function(t){var e=this.game.height-125*t,o=this.game.width;this.stick.posX=150*t,this.stick.posY=e,this.firebutton.posX=o-250*t,this.firebutton.posY=e,this.tractorbutton.posX=o-125*t,this.tractorbutton.posY=e},s.prototype.reset=function(){a=n=p=h=!1,this.queue.length=0},s.prototype.preUpdate=function(){var t=this.controls,e=this.joystickState;!e.up&&!t.up.isDown||a||(a=!0,this.queue.push({type:"up_pressed",executed:!1,seq:r++})),e.up||t.up.isDown||!a||(a=!1,this.queue.push({type:"up_released",executed:!1,seq:r++})),!e.down&&!t.down.isDown||n||(n=!0,this.queue.push({type:"down_pressed",executed:!1,seq:r++})),e.down||t.down.isDown||!n||(n=!1,this.queue.push({type:"down_released",executed:!1,seq:r++})),!e.right&&!t.right.isDown||h||(h=!0,this.queue.push({type:"right_pressed",executed:!1,seq:r++})),e.right||t.right.isDown||!h||(h=!1,this.queue.push({type:"right_released",executed:!1,seq:r++})),!e.left&&!t.left.isDown||p||(p=!0,this.queue.push({type:"left_pressed",executed:!1,seq:r++})),e.left||t.left.isDown||!p||(p=!1,this.queue.push({type:"left_released",executed:!1,seq:r++})),!e.fire&&!t.fire.isDown||c||(c=!0,this.queue.push({type:"fire_pressed",executed:!1,seq:r++})),e.fire||t.fire.isDown||!c||(c=!1,this.queue.push({type:"fire_released",executed:!1,seq:r++})),!e.tractor&&!t.tractor.isDown||d||(d=!0,this.queue.push({type:"tractor_pressed",executed:!1,seq:r++})),e.tractor||t.tractor.isDown||!d||(d=!1,this.queue.push({type:"tractor_released",executed:!1,seq:r++}))};var l;s.prototype.processQueue=function(t,e){for(var o=this.queue,i=0,s=o.length;s>i;i++)l=o[i],l.executed||(t(l),l.etime=this.game.time.now,l.executed=!0);e&&(o.length=0)},i.Controls=s,e.exports=s},{"../Starcoder-client.js":1}],25:[function(t,e,o){"use strict";function i(t,e,o,i){return i=i||1,t+(e-t)*o*i}var s=t("../Starcoder-client.js"),r=8,a=function(t,e){Phaser.Plugin.call(this,t,e)};a.prototype=Object.create(Phaser.Plugin.prototype),a.prototype.constructor=a,a.prototype.init=function(t,e){this.socket=t,this.cmdQueue=e,this.extant={}},a.prototype.start=function(){var t=this,e=this.game.starcoder;this._updateComplete=!1,this.socket.on("disconnect",function(){t.game.paused=!0}),this.socket.on("reconnect",function(){this.game.paused=!1}),this.socket.on("timesync",function(e){t._latency=e-t.game.time.now}),this.socket.on("update",function(o){for(var i=o.r,s=0,a=o.b.length;a>s;s++){var n,p=o.b[s],h=p.id;p.timestamp=i,(n=t.extant[h])?(n.updateQueue.push(p),p.properties&&n.config(p.properties),n.updateQueue.length>r&&n.updateQueue.shift()):(n=e.addBody(p.t,p),n&&(n.serverId=h,t.extant[h]=n,n.updateQueue=[p]))}for(s=0,a=o.rm.length;a>s;s++)h=o.rm[s],t.extant[h]&&(e.removeBody(t.extant[h]),delete t.extant[h])})},a.prototype.update=function(){this._updateComplete||(this._sendCommands(),this._processPhysicsUpdates(),this._updateComplete=!0)},a.prototype.postRender=function(){this._updateComplete=!1};var n,p=[];a.prototype._sendCommands=function(){p.length=0;for(var t=this.cmdQueue.length-1;t>=0;t--)n=this.cmdQueue[t],n.executed&&(p.unshift(n),
this.cmdQueue.splice(t,1));p.length&&this.socket.emit("do",p)},a.prototype._processPhysicsUpdates=function(){for(var t=this.game.time.now+this._latency-this.game.starcoder.config.renderLatency,e=Object.keys(this.extant),o=e.length-1;o>=0;o--){for(var s=this.extant[e[o]],r=s.updateQueue,a=null,n=null,p=1;r[p];){if(r[p].timestamp>t){n=r[p],a=r[p-1];break}p++}if(a||n)r.splice(0,p-1);else{if(!(r.length>=2))continue;a=r[r.length-2],n=r[r.length-1]}var h=n.timestamp-a.timestamp,c=(t-a.timestamp)/h;c=Math.min(1,Math.max(0,c)),s.setPosAngle(i(a.x,n.x,c),i(a.y,n.y,c),i(a.a,n.a,c))}},s.ServerSync=a,e.exports=a},{"../Starcoder-client.js":1}],26:[function(t,e,o){"use strict";var i=(t("../phaserplugins/Controls.js"),t("../phaserplugins/SyncClient.js"),function(){});i.prototype=Object.create(Phaser.State.prototype),i.prototype.constructor=i,i.prototype.init=function(){console.log("debug deploy mk2"),this.game.scale.scaleMode=Phaser.ScaleManager.RESIZE,this.game.scale.onSizeChange.add(function(){console.log("master resize CB")}),this.game.renderer.renderSession.roundPixels=!0,this.game.sharedGraphics=this.game.make.graphics();var t=this.starcoder.config.physicsScale,e=1/t,o=Math.floor;this.game.physics.config={pxm:function(t){return e*t},mpx:function(e){return o(t*e)},pxmi:function(t){return-e*t},mpxi:function(e){return o(-t*e)}},this.starcoder.serverConnect()},i.prototype.preload=function(){this.game.load.image("bar_left","assets/images/greenBarLeft.png"),this.game.load.image("bar_mid","assets/images/greenBarMid.png"),this.game.load.image("bar_right","assets/images/greenBarRight.png")},i.prototype.create=function(){this.game.state.start("loader")},e.exports=i},{"../phaserplugins/Controls.js":24,"../phaserplugins/SyncClient.js":25}],27:[function(t,e,o){"use strict";var i=function(){};i.prototype=Object.create(Phaser.State.prototype),i.prototype.constructor=i,i.prototype.init=function(){this.starcoder.starfield=this.game.make.bitmapData(600,600,"starfield",!0),this.starcoder.drawStarField(this.starcoder.starfield.ctx,600,16),this.game.add.tileSprite(0,0,this.game.width,this.game.height,this.starcoder.starfield);var t=Math.floor(.4*this.game.width),e=(this.game.width-t)/2,o=this.game.add.image(e,this.game.world.centerY,"bar_left");o.anchor.setTo(0,.5);var i=this.game.add.image(e+o.width,this.game.world.centerY,"bar_mid");i.anchor.setTo(0,.5);var s=this.game.add.image(e+o.width,this.game.world.centerY,"bar_right");s.anchor.setTo(0,.5);var r=t-2*o.width;i.width=0;var a=this.game.add.text(this.game.world.centerX,this.game.world.centerY-36,"Loading...",{font:"24px Arial",fill:"#ffffff",align:"center"});a.anchor.setTo(.5);var n=this.game.add.text(e+o.width,this.game.world.centerY,"0%",{font:"24px Arial",fill:"#ffffff",align:"center"});n.anchor.setTo(.5),this.game.load.onFileComplete.add(function(t){var e=Math.floor(r*t/100);i.width=e,s.x=i.x+e,n.setText(t+"%"),n.x=i.x+e/2},this)},i.prototype.preload=function(){this.game.load.bitmapFont("title-font","assets/bitmapfonts/karnivore128.png","assets/bitmapfonts/karnivore128.xml"),this.game.load.bitmapFont("readout-yellow","assets/bitmapfonts/heavy-yellow24.png","assets/bitmapfonts/heavy-yellow24.xml"),this.game.load.audio("playerthrust","assets/sounds/thrustLoop.ogg"),this.game.load.audio("chime","assets/sounds/chime.ogg"),this.game.load.audio("levelup","assets/sounds/levelup.ogg"),this.game.load.audio("planttree","assets/sounds/planttree.ogg"),this.game.load.audio("bigpop","assets/sounds/bigpop.ogg"),this.game.load.audio("littlepop","assets/sounds/littlepop.ogg"),this.game.load.audio("tagged","assets/sounds/tagged.ogg"),this.game.load.audio("laser","assets/sounds/laser.ogg"),this.game.load.audio("music","assets/sounds/ignore.ogg"),this.game.load.atlas("joystick","assets/joystick/generic-joystick.png","assets/joystick/generic-joystick.json")},i.prototype.update=function(){this.starcoder.connected&&this.game.state.start("login")},e.exports=i},{}],28:[function(t,e,o){"use strict";var i=function(){};i.prototype=Object.create(Phaser.State.prototype),i.prototype.constructor=i,i.prototype.init=function(){console.log("login");var t=this;this.starcoder.showLogin(),this.starcoder.socket.on("logged in",function(e){t.starcoder.hideLogin(),t.starcoder.player=e,t.game.state.start("space")}),this.starcoder.socket.on("login failure",function(e){t.starcoder.setLoginError(e)})},i.prototype.resize=function(t,e){console.log("rs Login",t,e)},i.prototype.create=function(){this.starcoder.starfield=this.game.make.bitmapData(600,600,"starfield",!0),this.starcoder.drawStarField(this.starcoder.starfield.ctx,600,16),this.game.add.tileSprite(0,0,this.game.width,this.game.height,this.starcoder.starfield);var t=this.game.add.bitmapText(this.game.world.centerX,128,"title-font","STARCODER");t.anchor.setTo(.5,.5)},e.exports=i},{}],29:[function(t,e,o){"use strict";var i=t("../phaserbodies/SimpleParticle.js"),s=t("../phaserbodies/ThrustGenerator.js"),r=t("../phaserui/MiniMap.js"),a=t("../phaserui/LeaderBoard.js"),n=t("../phaserbodies/Toast.js"),p=t("../phaserplugins/Controls.js"),h=t("../phaserplugins/SyncClient.js"),c=function(){};c.prototype=Object.create(Phaser.State.prototype),c.prototype.constructor=c,c.prototype.init=function(){this.starcoder.controls=this.starcoder.attachPlugin(p,this.starcoder.cmdQueue),this.starcoder.syncclient=this.starcoder.attachPlugin(h,this.starcoder.socket,this.starcoder.cmdQueue),this.stage.disableVisibilityChange=!0},c.prototype.preload=function(){i.cacheTexture(this.game,s.textureKey,"#ff6600",8),i.cacheTexture(this.game,"bullet","#999999",4),i.cacheTexture(this.game,"tractor","#eeeeee",8,!0)},c.prototype.create=function(){console.log("Space size",this.game.width,this.game.height,window.innerWidth,window.innerHeight),window.scrollTo(0,1);var t=this.starcoder.config.worldBounds,e=this.starcoder.config.physicsScale;this.game.physics.startSystem(Phaser.Physics.P2JS),this.world.setBounds.call(this.world,t[0]*e,t[1]*e,(t[2]-t[0])*e,(t[3]-t[1])*e),this.game.physics.p2.setBoundsToWorld(!0,!0,!0,!0,!1),this.starcoder.layoutDOMSpaceState(),this.starcoder.controls.reset(),this.starcoder.controls.addVirtualControls("joystick"),this.game.sounds={},this.game.sounds.playerthrust=this.game.sound.add("playerthrust",1,!0),this.game.sounds.chime=this.game.sound.add("chime",1,!1),this.game.sounds.planttree=this.game.sound.add("planttree",1,!1),this.game.sounds.bigpop=this.game.sound.add("bigpop",1,!1),this.game.sounds.littlepop=this.game.sound.add("littlepop",1,!1),this.game.sounds.tagged=this.game.sound.add("tagged",1,!1),this.game.sounds.laser=this.game.sound.add("laser",1,!1),this.game.sounds.music=this.game.sound.add("music",1,!0),this.game.sounds.music.play(),this.starcoder.starfield=this.game.make.bitmapData(600,600,"starfield",!0),this.starcoder.drawStarField(this.starcoder.starfield.ctx,600,16),this.game.add.tileSprite(t[0]*e,t[1]*e,(t[2]-t[0])*e,(t[3]-t[1])*e,this.starcoder.starfield),this.starcoder.syncclient.start(),this.starcoder.socket.emit("ready"),this._setupMessageHandlers(this.starcoder.socket),this.game.thrustgenerator=new s(this.game),this.game.playfield=this.game.add.group(),this.game.ui=this.game.add.group(),this.game.ui.fixedToCamera=!0;var o=this.game.make.text(this.game.width/2,25,"INVENTORY",{font:"24px Arial",fill:"#ff9900",align:"center"});o.anchor.setTo(.5,.5),this.game.ui.add(o),this.game.inventorytext=this.game.make.bitmapText(this.game.width/2,50,"readout-yellow","0"),this.game.inventorytext.anchor.setTo(.5,.5),this.game.ui.add(this.game.inventorytext),this.game.minimap=new r(this.game,300,300),this.game.ui.add(this.game.minimap),this.game.minimap.x=10,this.game.minimap.y=10,this.game.leaderboard=new a(this.game,this.starcoder.playerMap,200,300),this.game.ui.add(this.game.leaderboard),this.game.leaderboard.x=this.game.width-200,this.game.leaderboard.y=0,this.game.leaderboard.visible=!1},c.prototype.update=function(){var t=this;this.starcoder.controls.processQueue(function(e){"up_pressed"===e.type?t.game.playerShip.localState.thrust="starting":"up_released"===e.type&&(t.game.playerShip.localState.thrust="shutdown")})},c.prototype.render=function(){},c.prototype._setupMessageHandlers=function(t){var e=this;t.on("msg crystal pickup",function(t){e.game.sounds.chime.play(),n.spinUp(e.game,e.game.playerShip.x,e.game.playerShip.y,"+"+t+" crystals!")}),t.on("msg plant tree",function(t){e.game.sounds.planttree.play()}),t.on("msg asteroid pop",function(t){t>1?e.game.sounds.bigpop.play():e.game.sounds.littlepop.play()}),t.on("msg tagged",function(t){e.game.sounds.tagged.play()}),t.on("msg laser",function(t){e.game.sounds.laser.play()})},e.exports=c},{"../phaserbodies/SimpleParticle.js":16,"../phaserbodies/ThrustGenerator.js":19,"../phaserbodies/Toast.js":20,"../phaserplugins/Controls.js":24,"../phaserplugins/SyncClient.js":25,"../phaserui/LeaderBoard.js":30,"../phaserui/MiniMap.js":31}],30:[function(t,e,o){"use strict";var i=function(t,e,o,i){Phaser.Group.call(this,t),this.playerMap=e,this.open=!0,this.mainWidth=o,this.mainHeight=i,this.iconSize=24,this.fontSize=18,this.numLines=Math.floor((i-this.iconSize-2)/(this.fontSize+2)),this.main=t.make.group(),this.main.pivot.setTo(o,0),this.main.x=o,this.add(this.main);var s=this.game.make.bitmapData(o,i);s.ctx.fillStyle="rgba(128, 128, 128, 0.25)",s.ctx.fillRect(0,0,o,i),this.main.add(new Phaser.Sprite(t,0,0,s)),this.title=t.make.text((o-this.iconSize)/2,4,"Tags",{font:"20px Arial bold",align:"center",fill:"#ff0000"}),this.title.anchor.setTo(.5,0),this.main.add(this.title),this.lines=[];for(var r=0;r<this.numLines;r++){var a=t.make.text(4,this.iconSize+2+r*(this.fontSize+2),"-",{font:"18px Arial",fill:"#0000ff"});a.kill(),this.lines.push(a),this.main.add(a)}var n=this.makeButton();n.anchor.setTo(1,0),n.x=o,n.inputEnabled=!0,n.events.onInputDown.add(this.toggleDisplay,this),this.add(n)};i.prototype=Object.create(Phaser.Group.prototype),i.prototype.constructor=i,i.prototype.makeButton=function(){var t=this.iconSize/5,e=this.game.make.bitmapData(this.iconSize,this.iconSize),o=e.ctx;return o.fillStyle="#ffffff",o.beginPath(),o.moveTo(this.iconSize,0),o.lineTo(0,0),o.arc(this.iconSize,0,this.iconSize,Math.PI,3*Math.PI/2,!0),o.fill(),o.strokeStyle="#000000",o.beginPath(),o.moveTo(1.5*t,3*t),o.lineTo(1.5*t,2*t),o.lineTo(2.5*t,2*t),o.lineTo(2.5*t,1*t),o.lineTo(3.5*t,1*t),o.lineTo(3.5*t,2*t),o.lineTo(4.5*t,2*t),o.lineTo(4.5*t,3*t),o.closePath(),o.stroke(),new Phaser.Sprite(this.game,0,0,e)},i.prototype.setContent=function(t,e,o){this.title.setText(t);for(var i=!1,s=0;s<this.numLines;s++){var r=e[s]&&e[s].id;if(r&&this.playerMap[r]){var a=this.playerMap[r].tag,n=this.lines[s];n.setText(s+1+". "+a+" ("+e[s].val+")"),r===o?(n.fontWeight="bold",i=!0):n.fontWeight="normal",n.revive()}else this.lines[s].kill()}if(!i){for(s=this.numLines;s<e.length&&e[s].id!==o;s++);s<e.length&&n[this.numLines-1].setText(s+1+". "+this.playerMap[o]+" ("+e[s].val+")")}},i.prototype.toggleDisplay=function(){this.game.tweens.isTweening(this.main.scale)||(this.open?(this.game.add.tween(this.main.scale).to({x:0,y:0},500,Phaser.Easing.Quadratic.Out,!0),this.open=!1):(this.game.add.tween(this.main.scale).to({x:1,y:1},500,Phaser.Easing.Quadratic.Out,!0),this.open=!0))},e.exports=i},{}],31:[function(t,e,o){"use strict";var i=function(t,e,o){Phaser.Group.call(this,t);var i=e/this.game.starcoder.phaserWidth,s=o/this.game.starcoder.phaserHeight;s>=i?(this.mapScale=i,this.xOffset=-i*this.game.starcoder.phaserLeft,this.yOffset=-i*this.game.starcoder.phaserTop+(o-i*this.game.starcoder.phaserHeight)/2):(this.mapScale=s,this.yOffset=-s*this.game.starcoder.phaserTop,this.xOffset=-s*this.game.starcoder.phaserLeft+(e-s*this.game.starcoder.phaserWidth)/2),this.graphics=t.make.graphics(0,0),this.graphics.beginFill(16776960,.2),this.graphics.drawRect(0,0,e,o),this.graphics.endFill(),this.graphics.cacheAsBitmap=!0,this.add(this.graphics)};i.prototype=Object.create(Phaser.Group.prototype),i.prototype.constructor=i,i.prototype.update=function(){for(var t=0,e=this.game.playfield.children.length;e>t;t++){var o=this.game.playfield.children[t];o.minisprite&&(o.minisprite.x=this.worldToMmX(o.x),o.minisprite.y=this.worldToMmY(o.y),o.minisprite.angle=o.angle)}},i.prototype.worldToMmX=function(t){return t*this.mapScale+this.xOffset},i.prototype.worldToMmY=function(t){return t*this.mapScale+this.yOffset},e.exports=i},{}],32:[function(t,e,o){var i=t("./Starcoder-client.js");$(function(){var t=new i;t.start()})},{"./Starcoder-client.js":1}]},{},[32]);